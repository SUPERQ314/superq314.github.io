<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>superQ的个人小站</title>
  <icon>https://www.gravatar.com/avatar/53ec4cae8bfa9696385d334042db5c18</icon>
  <subtitle>山海无畏</subtitle>
  <link href="https://superq314.github.io/atom.xml" rel="self"/>
  
  <link href="https://superq314.github.io/"/>
  <updated>2022-06-30T17:07:33.766Z</updated>
  <id>https://superq314.github.io/</id>
  
  <author>
    <name>superQ</name>
    <email>220202090@seu.edu.cn</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Webpack中的HMR原理</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack%E4%B8%AD%E7%9A%84HMR%E5%8E%9F%E7%90%86/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack%E4%B8%AD%E7%9A%84HMR%E5%8E%9F%E7%90%86/</id>
    <published>2022-06-30T14:04:13.293Z</published>
    <updated>2022-06-30T17:07:33.766Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Webpack中的HMR原理"><a href="#Webpack中的HMR原理" class="headerlink" title="Webpack中的HMR原理"></a>Webpack中的HMR原理</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Hot Module Replacement（以下简称 HMR）是 webpack 发展至今引入的最令人兴奋的特性之一 ，当你对代码进行修改并保存后，webpack 将对代码重新打包，并将新的模块发送到浏览器端，浏览器通过新的模块替换老的模块，这样在不刷新浏览器的前提下就能够对应用进行更新。</p><p>基本实现原理大致这样的，构建 bundle 的时候，加入一段 HMR runtime 的 js 、一段与服务沟通过的 js 。文件修改会触发 webpack 重新构建，服务器通过向浏览器发送更新消息，浏览器通过 jsonp 拉取更新的模块文件，jsonp 回调触发模块热替换逻辑。</p><h3 id="热更新配置"><a href="#热更新配置" class="headerlink" title="热更新配置"></a>热更新配置</h3><p><strong>使用webpack-dev-server,设置 hot 属性为 true.</strong><br>写模块时，按照以下写法:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123; <span class="comment">//判断是否有热加载</span></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./hmrTest.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">//热加载的模块路径</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>); <span class="comment">//热加载的回调，即发生了模块更新时，执行什么 callback</span></span><br><span class="line">        <span class="title function_">printMe</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>缺点：更新逻辑得自己写。比如要使页面显示的内容生效，需要在回调中写入document.append(xxx)</p><p><strong>react 的热加载，使用 react-hot-loader</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-hot-loader&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Record</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">hot</span>(<span class="variable language_">module</span>)(<span class="title class_">Record</span>);</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./App&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">NextApp</span> = <span class="built_in">require</span>(<span class="string">&#x27;./App&#x27;</span>)</span><br><span class="line">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">NextApp</span> /&gt;</span></span>, rootEl)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h3><ol><li>watch 编译过程、devServer 推送更新消息到浏览器</li><li>浏览器接收到服务端消息做出响应</li><li>对模块进行热更新或刷新页面</li></ol><h3 id="watch-编译过程、devServer-推送更新消息到浏览器"><a href="#watch-编译过程、devServer-推送更新消息到浏览器" class="headerlink" title="watch 编译过程、devServer 推送更新消息到浏览器"></a>watch 编译过程、devServer 推送更新消息到浏览器</h3><ol><li>webpack-dev-server 里引用了 webpack-dev-middleware，相关的 watch 逻辑就是在里面实现的。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//webpack-dev-server/lib/Server.js</span></span><br><span class="line"><span class="title function_">setupDevMiddleware</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// middleware for serving webpack bundle</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">middleware</span> = <span class="title function_">webpackDevMiddleware</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">compiler</span>,</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">options</span>, &#123; </span><br><span class="line">            <span class="attr">logLevel</span>: <span class="variable language_">this</span>.<span class="property">log</span>.<span class="property">options</span>.<span class="property">level</span> </span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// webpack-dev-middleware/index.js</span></span><br><span class="line">    <span class="keyword">if</span> (!options.<span class="property">lazy</span>) &#123;</span><br><span class="line">        context.<span class="property">watching</span> = compiler.<span class="title function_">watch</span>(options.<span class="property">watchOptions</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                context.<span class="property">log</span>.<span class="title function_">error</span>(err.<span class="property">stack</span> || err);</span><br><span class="line">                <span class="keyword">if</span> (err.<span class="property">details</span>) &#123;</span><br><span class="line">                    context.<span class="property">log</span>.<span class="title function_">error</span>(err.<span class="property">details</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        context.<span class="property">state</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>以上代码可以看出，webpack-dev-middleware 是通过调用 webpack 的 api 对文件系统 watch 的。watchOptions 如果没有配置的话，会取默认值。值含义见：<a href="https://webpack.js.org/configuration/watch/">值含义</a></p><ol start="2"><li>当文件发生变化时，重新编译输出 bundle.js。devServer 下，是没有文件会输出到 output.path 目录下的，这时 webpack 是把文件输出到了内存中。webpack 中使用的操作内存的库是 memory-fs，它是 NodeJS 原生 fs 模块内存版(in-memory)的完整功能实现，会将你请求的url映射到对应的内存区域当中，因此读写都比较快。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack-dev-middleware/lib/fs.js</span></span><br><span class="line"><span class="keyword">const</span> isMemoryFs =</span><br><span class="line">    !isConfiguredFs &amp;&amp;</span><br><span class="line">    !compiler.<span class="property">compilers</span> &amp;&amp;</span><br><span class="line">    compiler.<span class="property">outputFileSystem</span> <span class="keyword">instanceof</span> <span class="title class_">MemoryFileSystem</span>;</span><br><span class="line">    ...</span><br><span class="line">    compiler.<span class="property">outputFileSystem</span> = fs;</span><br><span class="line">    fileSystem = fs;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isMemoryFs) &#123;</span><br><span class="line">        fileSystem = compiler.<span class="property">outputFileSystem</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fileSystem = <span class="keyword">new</span> <span class="title class_">MemoryFileSystem</span>();</span><br><span class="line">        compiler.<span class="property">outputFileSystem</span> = fileSystem;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>devServer 通知浏览器端文件发生改变，在启动 devServer 的时候，sockjs 在服务端和浏览器端建立了一个 webSocket 长连接，以便将 webpack 编译和打包的各个阶段状态告知浏览器，最关键的步骤还是 webpack-dev-server 调用 webpack api 监听 compile的 done 事件，当compile 完成后，webpack-dev-server通过 _sendStatus 方法将编译打包后的新模块 hash 值发送到浏览器端。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack-dev-server/lib/Server.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addHooks</span> = (<span class="params">compiler</span>) =&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    done.<span class="title function_">tap</span>(<span class="string">&#x27;webpack-dev-server&#x27;</span>, <span class="function">(<span class="params">stats</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_sendStats</span>(<span class="variable language_">this</span>.<span class="property">sockets</span>, <span class="variable language_">this</span>.<span class="title function_">getStats</span>(stats));</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_stats</span> = stats;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// send stats to a socket or multiple sockets</span></span><br><span class="line"><span class="title function_">_sendStats</span>(<span class="params">sockets, stats, force</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">sockWrite</span>(sockets, <span class="string">&#x27;hash&#x27;</span>, stats.<span class="property">hash</span>);</span><br><span class="line">    <span class="keyword">if</span> (stats.<span class="property">errors</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">sockWrite</span>(sockets, <span class="string">&#x27;errors&#x27;</span>, stats.<span class="property">errors</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stats.<span class="property">warnings</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">sockWrite</span>(sockets, <span class="string">&#x27;warnings&#x27;</span>, stats.<span class="property">warnings</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">sockWrite</span>(sockets, <span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="浏览器接收到服务端消息做出响应"><a href="#浏览器接收到服务端消息做出响应" class="headerlink" title="浏览器接收到服务端消息做出响应"></a>浏览器接收到服务端消息做出响应</h3><ol><li>这里的主要逻辑位于 webpack-dev-server&#x2F;client-src 中，webpack-dev-server 修改了webpack 配置中的 entry 属性，在里面添加了 webpack-dev-client 的代码，这样在最后的 bundle.js 文件中就会有接收 websocket 消息的代码了。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//webpack-dev-server/lib/utils/addEntries.js</span></span><br><span class="line"><span class="comment">/* @type &#123;string&#125; */</span></span><br><span class="line"><span class="keyword">const</span> clientEntry = <span class="string">`<span class="subst">$&#123;<span class="built_in">require</span>.resolve(</span></span></span><br><span class="line"><span class="subst"><span class="string">    <span class="string">&#x27;../../client/&#x27;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    )&#125;</span>?<span class="subst">$&#123;domain&#125;</span><span class="subst">$&#123;sockHost&#125;</span><span class="subst">$&#123;sockPath&#125;</span><span class="subst">$&#123;sockPort&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* @type &#123;(string[] | string)&#125; */</span></span><br><span class="line"><span class="keyword">let</span> hotEntry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (options.<span class="property">hotOnly</span>) &#123;</span><br><span class="line">    hotEntry = <span class="built_in">require</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;webpack/hot/only-dev-server&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.<span class="property">hot</span>) &#123;</span><br><span class="line">    hotEntry = <span class="built_in">require</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;webpack/hot/dev-server&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">[].<span class="title function_">concat</span>(config).<span class="title function_">forEach</span>(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">const</span> additionalEntries = <span class="title function_">checkInject</span>(</span><br><span class="line">        options.<span class="property">injectClient</span>,</span><br><span class="line">        config,</span><br><span class="line">        webTarget</span><br><span class="line">    )</span><br><span class="line">    ? [clientEntry]</span><br><span class="line">    : [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hotEntry &amp;&amp; <span class="title function_">checkInject</span>(options.<span class="property">injectHot</span>, config, <span class="literal">true</span>)) &#123;</span><br><span class="line">        additionalEntries.<span class="title function_">push</span>(hotEntry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    config.<span class="property">entry</span> = <span class="title function_">prependEntry</span>(config.<span class="property">entry</span> || <span class="string">&#x27;./src&#x27;</span>, additionalEntries);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">hot</span> || options.<span class="property">hotOnly</span>) &#123;</span><br><span class="line">        config.<span class="property">plugins</span> = config.<span class="property">plugins</span> || [];</span><br><span class="line">        <span class="keyword">if</span> (!config.<span class="property">plugins</span>.<span class="title function_">find</span>(</span><br><span class="line">            <span class="function">(<span class="params">plugin</span>) =&gt;</span> plugin.<span class="property">constructor</span>.<span class="property">name</span> === <span class="string">&#x27;HotModuleReplacementPlugin&#x27;</span></span><br><span class="line">        )</span><br><span class="line">        ) &#123;</span><br><span class="line">            config.<span class="property">plugins</span>.<span class="title function_">push</span>(<span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>以上代码可以看出，如果选择了热加载，输出的 bundle.js 会包含接收 websocket 消息的代码。而且 plugin 也会注入一个 HotModuleReplacementPlugin，构建过程中热加载相关的逻辑都在这个插件中。这个插件主要处理两部分逻辑：</li></ol><ul><li>注入 HMR runtime 逻辑</li><li>找到修改的模块，生成一个补丁 js 文件和更新描述 json 文件<br>先看一张图，看看 websocket 中的消息长什么样子：<br><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/8/9/16c75bb62b71afd9~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="GitHub"><br>可以看到，接收的消息只有 type 和 hash 两个内容。在 client 里面的逻辑，他们分别对应不同的处理逻辑：</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack-dev-server/client-src/default/index.js</span></span><br><span class="line"><span class="title function_">hash</span>(<span class="params">hash</span>) &#123;</span><br><span class="line">    status.<span class="property">currentHash</span> = hash;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br><span class="line"><span class="title function_">ok</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">sendMessage</span>(<span class="string">&#x27;Ok&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">useWarningOverlay</span> || options.<span class="property">useErrorOverlay</span>) &#123;</span><br><span class="line">        overlay.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">initial</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (options.<span class="property">initial</span> = <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="comment">// eslint-disable-line no-return-assign</span></span><br><span class="line">    <span class="title function_">reloadApp</span>(options, status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>可以看出，当接收到 type 为 hash 消息后会将 hash 值暂存起来，当接收到 type 为 ok 的消息后对应用执行 reload 操作，而 hash 消息是在 ok 消息之前的。再看看 reload 里面的处理逻辑：</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack-dev-server/client-src/default/reloadApp.js</span></span><br><span class="line"><span class="keyword">if</span> (hot) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">const</span> hotEmitter = <span class="built_in">require</span>(<span class="string">&#x27;webpack/hot/emitter&#x27;</span>);</span><br><span class="line">        hotEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;webpackHotUpdate&#x27;</span>, currentHash);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> self !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; self.<span class="property">window</span>) &#123;</span><br><span class="line">        self.<span class="title function_">postMessage</span>(<span class="string">`webpackHotUpdate<span class="subst">$&#123;currentHash&#125;</span>`</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (liveReload) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>可以看出，如果配置了模块热更新，就调用 webpack&#x2F;hot&#x2F;emitter 将最新 hash 值发送给 webpack，然后将控制权交给 webpack 客户端代码。如果没有配置模块热更新，就进行 liveReload 的逻辑。webpack&#x2F;hot&#x2F;dev-server 中会监听 webpack-dev-server&#x2F;client-src 发送的 webpackHotUpdate 消息,然后调用 webpack&#x2F;lib&#x2F;HotModuleReplacement.runtime 中的 check 方法，检测是否有新的更新：</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack/hot/dev-server.js</span></span><br><span class="line"><span class="keyword">var</span> hotEmitter = <span class="built_in">require</span>(<span class="string">&quot;./emitter&quot;</span>);</span><br><span class="line">hotEmitter.<span class="title function_">on</span>(<span class="string">&quot;webpackHotUpdate&quot;</span>, <span class="keyword">function</span>(<span class="params">currentHash</span>) &#123;</span><br><span class="line">    lastHash = currentHash;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">upToDate</span>() &amp;&amp; <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">status</span>() === <span class="string">&quot;idle&quot;</span>) &#123;</span><br><span class="line">        <span class="title function_">log</span>(<span class="string">&quot;info&quot;</span>, <span class="string">&quot;[HMR] Checking for updates on the server...&quot;</span>);</span><br><span class="line">        <span class="title function_">check</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack/lib/HotModuleReplacement.runtime</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hotCheck</span>(<span class="params">apply</span>) &#123;</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">hotDownloadManifest</span>(hotRequestTimeout).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">update</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line">            <span class="comment">/*globals chunkId */</span></span><br><span class="line">            <span class="title function_">hotEnsureUpdateChunk</span>(chunkId);</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span> promise;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hotEnsureUpdateChunk</span>(<span class="params">chunkId</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!hotAvailableFilesMap[chunkId]) &#123;</span><br><span class="line">        hotWaitingFilesMap[chunkId] = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        hotRequestedFilesMap[chunkId] = <span class="literal">true</span>;</span><br><span class="line">        hotWaitingFiles++;</span><br><span class="line">        <span class="title function_">hotDownloadUpdateChunk</span>(chunkId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>以上代码可以看出，在 check 过程中，主要调用了两个方法 hotDownloadManifest 和 hotDownloadUpdateChunk。hotDownloadManifest 是通过 Ajax 向服务器请求十分有更新的文件，如果有就返回对应的文件信息，hotDownloadUpdateChunk 是通过Jsonp的方式，请求最新的代码模块。如下图所示:</li></ol><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/8/9/16c75bb64ef0a9d2~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="GitHub"></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/8/9/16c75bb67d383ae4~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="GitHub"></p><p>补充，这两个文件的名称是可以配置的，如果没有配置，则取定义在 WebpackOptionsDefaulter 中的默认配置。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">set</span>(<span class="string">&quot;output.hotUpdateChunkFilename&quot;</span>, <span class="string">&quot;[id].[hash].hot-update.js&quot;</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">set</span>(<span class="string">&quot;output.hotUpdateMainFilename&quot;</span>, <span class="string">&quot;[hash].hot-update.json&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="对模块进行热更新或刷新页面"><a href="#对模块进行热更新或刷新页面" class="headerlink" title="对模块进行热更新或刷新页面"></a>对模块进行热更新或刷新页面</h3><p>综上，我们获得了更新的内容。接下来就可以进行更新了。这部分的逻辑在 webpack&#x2F;lib&#x2F;HotModuleReplacement.runtime 中。</p><ol><li>首先，更新过的模块，现在都属于 outdated 的模块，所以先找出过期的模块及其依赖:</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack/lib/HotModuleReplacement.runtime</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAffectedStuff</span>(<span class="params">updateModuleId</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> outdatedModules = [updateModuleId];</span><br><span class="line">    <span class="keyword">var</span> outdatedDependencies = &#123;&#125;;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;accepted&quot;</span>,</span><br><span class="line">        <span class="attr">moduleId</span>: updateModuleId,</span><br><span class="line">        <span class="attr">outdatedModules</span>: outdatedModules,</span><br><span class="line">        <span class="attr">outdatedDependencies</span>: outdatedDependencies</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>根据调用的 Api 信息，对结果进行标注及处理。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (result.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;self-declined&quot;</span>:</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;declined&quot;</span>:</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;unaccepted&quot;</span>:</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;accepted&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> (options.<span class="property">onAccepted</span>) options.<span class="title function_">onAccepted</span>(result);</span><br><span class="line">        doApply = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;disposed&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> (options.<span class="property">onDisposed</span>) options.<span class="title function_">onDisposed</span>(result);</span><br><span class="line">        doDispose = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Unexception type &quot;</span> + result.<span class="property">type</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>从缓存中删除过期的模块和依赖</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// remove module from cache</span></span><br><span class="line"><span class="keyword">delete</span> installedModules[moduleId];</span><br><span class="line"></span><br><span class="line"><span class="comment">// when disposing there is no need to call dispose handler</span></span><br><span class="line"><span class="keyword">delete</span> outdatedDependencies[moduleId];</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove &quot;parents&quot; references from all children</span></span><br><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="variable language_">module</span>.<span class="property">children</span>.<span class="property">length</span>; j++) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// remove outdated dependency from module children</span></span><br><span class="line"><span class="keyword">var</span> dependency;</span><br><span class="line"><span class="keyword">var</span> moduleOutdatedDependencies;</span><br><span class="line"><span class="keyword">for</span> (moduleId <span class="keyword">in</span> outdatedDependencies) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>将新的模块添加到 modules 中，当下次调用 <strong>webpack_require</strong> (webpack 重写的 require 方法)方法的时候，就是获取到了新的模块代码了。</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// insert new code</span></span><br><span class="line"><span class="keyword">for</span> (moduleId <span class="keyword">in</span> appliedUpdate) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(appliedUpdate, moduleId)) &#123;</span><br><span class="line">        modules[moduleId] = appliedUpdate[moduleId];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后就是错误的兼容了，如果热加载失败，将会刷新浏览器。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Webpack中的HMR原理&quot;&gt;&lt;a href=&quot;#Webpack中的HMR原理&quot; class=&quot;headerlink&quot; title=&quot;Webpack中的HMR原理&quot;&gt;&lt;/a&gt;Webpack中的HMR原理&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot;</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack性能优化总结大全</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93%E5%A4%A7%E5%85%A8/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93%E5%A4%A7%E5%85%A8/</id>
    <published>2022-06-30T14:04:10.806Z</published>
    <updated>2022-06-30T17:08:56.930Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Webpack性能优化总结大全"><a href="#Webpack性能优化总结大全" class="headerlink" title="Webpack性能优化总结大全"></a>Webpack性能优化总结大全</h2><h3 id="开发体验优化"><a href="#开发体验优化" class="headerlink" title="开发体验优化"></a><strong>开发体验</strong>优化</h3><h4 id="优化-Loader-配置"><a href="#优化-Loader-配置" class="headerlink" title="优化 Loader 配置"></a>优化 Loader 配置</h4><p>由于 Loader 对文件的转换操作很耗时，所以需要让尽可能少的文件被 Loader 处理。可以通过 test&#x2F;include&#x2F;exclude 三个配置项来命中 Loader 要应用规则的文件。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span> .<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="variable language_">module</span> : &#123;</span><br><span class="line">        rules : [&#123;</span><br><span class="line">            <span class="comment">//如果项目源码中只有 文件，就不要写成/\jsx?$/，以提升正则表达式的性能</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">//babel -loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启</span></span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader?cacheDirectory&#x27;</span>] ,</span><br><span class="line">            <span class="comment">//只对项目根目录下 src 目录中的文件采用 babel-loader</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">        &#125;],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><a href="https://www.webpackjs.com/loaders/babel-loader/#babel-loader-%E5%BE%88%E6%85%A2-">webpack 官方文档</a></strong></p><h4 id="优化-resolve-modules-配置"><a href="#优化-resolve-modules-配置" class="headerlink" title="优化 resolve.modules 配置"></a><strong>优化 resolve.modules 配置</strong></h4><p>resolve.modules 的默认值是［’node_modules’］，含义是先去当前目录的 node_modules 目录下去找我们想找的模块，如果没找到就去上一级目录 ..&#x2F;node_modules 中找，再没有就去 ..&#x2F;..&#x2F;node_modules 中找，以此类推。这和 Node.js 的模块寻找机制很相似。当安装的第三方模块都放在项目根目录的 node_modules 目录下时，就没有必要按照默认的方式去一层层地寻找，可以指明存放第三方模块的绝对路径，以减少寻找.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        modules: [path.resolve( __dirname,&#x27;node modules&#x27;)]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="优化-resolve-mainFields-配置"><a href="#优化-resolve-mainFields-配置" class="headerlink" title="优化 resolve.mainFields 配置"></a><strong>优</strong>化 resolve.mainFields 配置</h4><p>在安装的第三方模块中都会有一个 package.json 文件，用于描述这个模块的属性,其中可以存在多个字段描述入口文件，原因是某些模块可以同时用于多个环境中，针对不同的运行环境需要使用不同的代码。</p><p>resolve.mainFields 的默认值和当前的 target 配置有关系，对应的关系如下。</p><ul><li>target web 或者 webworker 时，值是［’browser’,’module’,’main’]。</li><li>target 为其他情况时，值是［ ‘module’,’main’]。</li></ul><p>以 target 等于 web 为例， Webpack 会先采用第三方模块中的 browser 字段去寻找模块的入口文件，如果不存在，就采用 module 字段，以此类推。</p><p>为了减少搜索步骤，在明确第三方模块的入口文件描述字段时，我们可以将它设置得尽量少。由于大多数第三方模块都采用 main 字段去描述入口文件的位置，所以可以这样配置：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">    //只采用 main 字段作为入口文件的描述字段，以减少搜索步骤</span><br><span class="line">        mainFields: [&#x27;main&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="优化-resolve-alias-配置"><a href="#优化-resolve-alias-配置" class="headerlink" title="优化 resolve.alias 配置"></a>优化 resolve.alias 配置</h4><p>resolve.alias 配置项通过别名来将原导入路径映射成一个新的导入路径。</p><p>在实战项目中经常会依赖一些庞大的第三方模块，以 React 库为例，发布出去的 React 库中包含两套代码</p><ul><li>一套是采用 CommonJS 规范的模块化代码，这些文件都放在 lib 录下，以 package.json 中指定的入口文件 react.js 为模块的入口</li><li>一套是将 React 的所有相关代码打包好的完整代码放到一个单独的文件中， 这些代码没有采用模块化，可以直接执行。其中 dist&#x2F;react.js 用于开发环境，里面包含检查和警告的代码。dist&#x2F;react.min.js 用于线上环境，被最小化了。</li></ul><p>在默认情况下， Webpack 会从入口文件 .&#x2F;node_modules&#x2F;react&#x2F;react.js 开始递归解析和处理依赖的几十个文件，这会是一个很耗时的操作 通过配置 resolve.alias, 可以让 Webpack 在处理 React 库时，直接使用单独、完整的 react.min.js 文件,从而跳过耗时的递归解析操作.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //使用 alias 将导入 react 的语句换成直接使用单独、完整的 react.min.js 文件，</span><br><span class="line">        //减少耗时的递归解析操作</span><br><span class="line">        alias: &#123;</span><br><span class="line">            &#x27;react&#x27;: path.resolve( __dirname ,&#x27;./node_modules/react/dist/react.min.js&#x27;),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>但是，对某些库使用本优化方法后，会影响到使用 Tree-Sharking 去除无效代码的优化，因为打包好的完整文件中有部分代码在我们的项目中可能永远用不上。</strong> <strong>一般对整体性比较强的库采用本方法优化，因为完整文件中的代码是一个整体，每一行都是不可或缺的 但是对于一些工具类的库，则不建议用此方法。</strong></p><h4 id="优化-resolve-extensions-配置"><a href="#优化-resolve-extensions-配置" class="headerlink" title="优化 resolve.extensions 配置"></a><strong>优化 resolve.extensions 配置</strong></h4><p>在导入语句没带文件后缀时，Webpack 会自动带上后缀去尝试询问文件是否存在。如果这个列表越长，或者正确的后缀越往后，就会造成尝试的次数越多，所以resolve .extensions 的配置也会影响到构建的性能 在配置resolve.extensions 时需要遵守 以下几点，以做到尽可能地优化构建性能。</p><ul><li>后缀尝试列表要尽可能小，不要将项目中不可能存在的情况写到后缀尝试列表中。</li><li>频率出现最高的文件后缀要优先放在最前面，以做到尽快退出寻找过程。</li><li>在源码中写导入语句时，要尽可能带上后缀 从而可以避免寻找过程。例如在确定的情况下将 require ( ‘.&#x2F;data ‘） 写成 require （’.&#x2F;data.json’）</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    resolve : &#123;</span><br><span class="line">        //尽可能减少后缀尝试的可能性</span><br><span class="line">        extensions : [&#x27;js&#x27;],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="优化-module-noParse-配置"><a href="#优化-module-noParse-配置" class="headerlink" title="优化 module.noParse 配置"></a>优化 module.noParse 配置</h4><p>module.noParse 配置项可以让 Webpack 忽略对部分没采用模块化的文件的递归解析处理，这样做的好处是能提高构建性能。原因是一些库如 jQuery。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    module: &#123;</span><br><span class="line">        noParse: /jquery/,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="使用-DllPlugin"><a href="#使用-DllPlugin" class="headerlink" title="使用 DllPlugin"></a><strong>使用 DllPlugin</strong></h4><p>DLLPlugin 和 DLLReferencePlugin 用某种方法实现了拆分 bundles，同时还大大提升了构建的速度。</p><p>包含大量复用模块的动态链接库只需被编译一次，在之后的构建过程中被动态链接库包含的模块将不会重新编译，而是直接使用动态链接库中 的代码 由于动态链接库中大多数包含的是常用的第三方模块，例如 react、react-dom ，所以只要不升级这些模块的版本，动态链接库就不用重新编译。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://github.com/webpack/webpack/tree/master/examples/dll-user</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    // mode: &quot;development || &quot;production&quot;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.DllReferencePlugin(&#123;</span><br><span class="line">            context: path.join(__dirname, &quot;..&quot;, &quot;dll&quot;),</span><br><span class="line">            manifest: require(&quot;../dll/dist/alpha-manifest.json&quot;) // eslint-disable-line</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.DllReferencePlugin(&#123;</span><br><span class="line">            scope: &quot;beta&quot;,</span><br><span class="line">            manifest: require(&quot;../dll/dist/beta-manifest.json&quot;), // eslint-disable-line</span><br><span class="line">            extensions: [&quot;.js&quot;, &quot;.jsx&quot;]</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>这个理解起来不费劲，操作起来很费劲。所幸，在Webpack5中已经不用它了，而是用 <code>HardSourceWebpackPlugin</code>，一样的优化效果，但是使用却及其简单</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HardSourceWebpackPlugin = require(&#x27;hard-source-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">const plugins = [</span><br><span class="line">    new HardSourceWebpackPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>更开心的是，这个插件，webapck4就可以用啦，赶紧用起来吧～</strong></p><p> <strong>注意：</strong> <strong>该插件与测量各流程耗时的插件 <code>speed-measure-webpack-plugin</code>不兼容。</strong></p><h4 id="使用-HappyPack"><a href="#使用-HappyPack" class="headerlink" title="使用 HappyPack"></a><strong>使用 HappyPack</strong></h4><p>Webpack 是单线程模型的，也就是说 Webpack 需要一个一个地处理任务，不能同时处理多个任务。HappyPack将任 务分解给多个子进程去并发执行，子进程处理完后再将结果发送给主进程,从而发挥多核 CPU 电脑的威力。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HappyPack = require(&#x27;happypack&#x27;)</span><br><span class="line">const os = require(&#x27;os&#x27;)</span><br><span class="line">const happyThreadPool = HappyPack.ThreadPool(&#123; size: os.cpus().length &#125;)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    // loader: &#x27;babel-loader&#x27;,</span><br><span class="line">    loader: &#x27;happypack/loader?id=happy-babel-js&#x27;, // 增加新的HappyPack构建loader</span><br><span class="line">    include: [resolve(&#x27;src&#x27;)],</span><br><span class="line">    exclude: /node_modules/,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    new HappyPack(&#123;</span><br><span class="line">        id: &#x27;happy-babel-js&#x27;,</span><br><span class="line">        loaders: [&#x27;babel-loader?cacheDirectory=true&#x27;],</span><br><span class="line">        threadPool: happyThreadPool</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>在整个 Webpack 构建流程中，最耗时的流程可能就是 Loader 对文件的转换操作了，因为要转换的文件数据量巨大，而且这些转换操作都只能一个一个地处理 HappyPack 的核心原理就是将这部分任务分解到多个进程中去并行处理，从而减少总的构建时间。</p><h4 id="使用-ParallelUglifyPlugin"><a href="#使用-ParallelUglifyPlugin" class="headerlink" title="使用 ParallelUglifyPlugin"></a><strong>使用 ParallelUglifyPlugin</strong></h4><p>webpack默认提供了UglifyJS插件来压缩JS代码，但是它使用的是单线程压缩代码，也就是说多个js文件需要被压缩，它需要一个个文件进行压缩。所以说在正式环境打包压缩代码速度非常慢(因为压缩JS代码需要先把代码解析成用Object抽象表示的AST语法树，再去应用各种规则分析和处理AST，导致这个过程耗时非常大)。</p><p>当webpack有多个JS文件需要输出和压缩时候，原来会使用UglifyJS去一个个压缩并且输出，但是ParallelUglifyPlugin插件则会开启多个子进程，把对多个文件压缩的工作分别给多个子进程去完成，但是每个子进程还是通过UglifyJS去压缩代码。无非就是变成了并行处理该压缩了，并行处理多个子任务，效率会更加的提高。</p><h4 id="优化文件监听的性能"><a href="#优化文件监听的性能" class="headerlink" title="优化文件监听的性能"></a><strong>优化文件监</strong>听<strong>的性能</strong></h4><p>在开启监听模式时，默认情况下会监听配置的 Entry 文件和所有 Entry 递归依赖的文件，在这些文件中会有很多存在于 node_modules 下，因为如今的 Web 项目会依赖大量的第三方模块， 所以在大多数情况下我们都不可能去编辑 node_modules 下的文件，而是编辑自己建立的源码文件，而一个很大的优化点就是忽略 node_modules 下的文件，不监听它们。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.export = &#123;</span><br><span class="line">    watchOptions : &#123;</span><br><span class="line">        //不监听的 node_modules 目录下的文件</span><br><span class="line">        ignored : /node_modules/,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>采用这种方法优化后， Webpack 消耗的内存和 CPU 将会大大减少。</p><h3 id="输出质量优化"><a href="#输出质量优化" class="headerlink" title="输出质量优化"></a><strong>输出质量优化</strong></h3><h4 id="Webpack-实现-CDN-的接入"><a href="#Webpack-实现-CDN-的接入" class="headerlink" title="Webpack 实现 CDN 的接入"></a><strong>Webpack 实现 CDN 的接入</strong></h4><p>总之，构建需要实现以下几点:</p><ul><li>静态资源的导入  URL 需要变成指向 DNS 服务的绝对路径的 URL，而不是相对 HTML 文件的</li><li>静态资源的文件名需要带上由文件内容算出来的 Hash 值，以防止被缓存</li><li>将不同类型的资源放到不同域名的 DNS 服务上，以防止资源的并行加载被阻塞</li></ul><p><strong>更多参考：</strong><a href="http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-9CDN%E5%8A%A0%E9%80%9F.html">http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-9CDN%E5%8A%A0%E9%80%9F.html</a></p><h4 id="使用-Tree-Shaking"><a href="#使用-Tree-Shaking" class="headerlink" title="使用 Tree Shaking"></a><strong>使用 Tree Shaking</strong></h4><p>Tree Shaking 正常工作的前提是，提交给 Webpack 的 JavaScript 代码必须采用了 ES6 的模块化语法，因为 ES6 模块化语法是静态的，可以进行静态分析。</p><p>首先，为了将采用 ES6 模块化的代码提交给 Webpack ，需要配置 Babel 以让其保留 ES6 模块化语句。修改 .babelrc 文件如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x27;presets&#x27;:[</span><br><span class="line">        [</span><br><span class="line">            &#x27;env&#x27;,&#123;</span><br><span class="line">                &#x27;module&#x27;:false</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个要求，需要使用UglifyJsPlugin插件。如果在mode:”production”模式，这个插件已经默认添加了，如果在其它模式下，可以手工添加它。</p><p>另外要记住的是打开optimization.usedExports。在mode: “production”模式下，它也是默认打开了的。它告诉webpack每个模块明确使用exports。这样之后，webpack会在打包文件中添加诸如&#x2F;* unused harmony export *&#x2F;这样的注释，其后UglifyJsPlugin插件会对这些注释作出理解。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;none&#x27;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimize: true,</span><br><span class="line">        minimizer: [</span><br><span class="line">            new UglifyJsPlugin()</span><br><span class="line">        ],</span><br><span class="line">        usedExports: true,</span><br><span class="line">        sideEffects: true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="提取公共代码"><a href="#提取公共代码" class="headerlink" title="提取公共代码"></a><strong>提取公共代码</strong></h4><p>大型网站通常由多个页面组成，每个页面都是一个独立的单页应用，但由于所有页面都采用同样的技术栈及同一套样式代码，就导致这些页面之间有很多相同的代码。可以使用 splitChunks 进行分包：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">splitChunks: &#123;</span><br><span class="line">    chunks: &quot;async&quot;,</span><br><span class="line">    minSize: 30000,</span><br><span class="line">    minChunks: 1,</span><br><span class="line">    maxAsyncRequests: 5,</span><br><span class="line">    maxInitialRequests: 3,</span><br><span class="line">    automaticNameDelimiter: &#x27;~&#x27;,</span><br><span class="line">    name: true,</span><br><span class="line">    cacheGroups: &#123;</span><br><span class="line">        vendors: &#123;</span><br><span class="line">            test: /[\\/]node_modules[\\/]/,</span><br><span class="line">            priority: -10</span><br><span class="line">        &#125;,</span><br><span class="line">        default: &#123;</span><br><span class="line">            minChunks: 2,</span><br><span class="line">            priority: -20,</span><br><span class="line">            reuseExistingChunk: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="分割代码以按需加载"><a href="#分割代码以按需加载" class="headerlink" title="分割代码以按需加载"></a><strong>分割代码以按需加载</strong></h4><p>Webpack 支持两种动态代码拆分技术：</p><ul><li>符合 ECMAScript proposal 的 import() 语法，推荐使用</li><li>传统的 require.ensure</li></ul><p>import() 用于动态加载模块，其引用的模块及子模块会被分割打包成一个独立的 chunk。Webpack 还允许以注释的方式传参，进而更好的生成 chunk。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// single target</span><br><span class="line">import(</span><br><span class="line">    /* webpackChunkName: &quot;my-chunk-name&quot; */</span><br><span class="line">    /* webpackMode: &quot;lazy&quot; */</span><br><span class="line">    &#x27;module&#x27;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// multiple possible targets</span><br><span class="line">import(</span><br><span class="line">/* webpackInclude: /\.json$/ */</span><br><span class="line">/* webpackExclude: /\.noimport\.json$/ */</span><br><span class="line">/* webpackChunkName: &quot;my-chunk-name&quot; */</span><br><span class="line">/* webpackMode: &quot;lazy&quot; */</span><br><span class="line">`./locale/$&#123;language&#125;`</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>回归到实际业务场景，页面基本上都是通过路由的方式呈现，如果按照路由的方式实现页面级的异步加载，岂不是方便很多。例如，react 中可使用 loadable :</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from&#x27;react&#x27;</span><br><span class="line">import &#123; Route &#125; from&#x27;react-router-dom&#x27;</span><br><span class="line">import &#123; loadable &#125; from&#x27;react-common-lib&#x27;</span><br><span class="line"></span><br><span class="line">const Test = loadable(&#123;</span><br><span class="line">    loader: () =&gt;import(&#x27;./test&#x27;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const AppRouter = () =&gt; (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">        &lt;Route path=&quot;/test&quot; exact component=&#123;Test&#125; /&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="分析工具"><a href="#分析工具" class="headerlink" title="分析工具"></a><strong>分析工具</strong></h4><p>官方可视化工具：<a href="http://webpack.github.io/analyse/">http://webpack.github.io/analyse/</a></p><h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><ul><li>点右下角「在看」，让更多的人也能看到这篇内容，好东西一起分享…</li><li>欢迎加我微信(winty230)，拉你进技术群，长期交流学习…</li><li>欢迎关注「前端Q」,认真学前端，做个有态度的技术人..</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Webpack性能优化总结大全&quot;&gt;&lt;a href=&quot;#Webpack性能优化总结大全&quot; class=&quot;headerlink&quot; title=&quot;Webpack性能优化总结大全&quot;&gt;&lt;/a&gt;Webpack性能优化总结大全&lt;/h2&gt;&lt;h3 id=&quot;开发体验优化&quot;&gt;&lt;a hr</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>构建工具选择</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9/</id>
    <published>2022-06-30T07:18:10.319Z</published>
    <updated>2022-06-30T17:09:47.152Z</updated>
    
    <content type="html"><![CDATA[<h3 id="构建工具选择"><a href="#构建工具选择" class="headerlink" title="构建工具选择"></a>构建工具选择</h3><p>针对不同的场景，选择最合适的工具</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/17/16f12c6625059e8d~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="GitHub"></p><p>通过对比，不难看出，Webpack和Rollup在不同场景下，都能发挥自身优势作用。webpack作为打包工具，但是在定义模块输出的时候，webpack确不支持ESM，webpack插件系统庞大，确实有支持模块级的Tree-Shacking的插件，如webpack-deep-scope-analysis-plugin。但是粒度更细化的，一个模块里面的某个方法，本来如果没有被引用的话也可以去掉的，就不行了….这个时候，就要上rollup了。rollup它支持程序流分析，能更加正确的判断项目本身的代码是否有副作用，其实就是rollup的tree-shaking更干净。所以我们的结论是rollup 比较适合打包 js 的 sdk 或者封装的框架等，例如，vue 源码就是 rollup 打包的。而 webpack 比较适合打包一些应用，例如 SPA 或者同构项目等等。</p><p>结论:在开发应用时使用 Webpack，开发库时使用 Rollup</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;构建工具选择&quot;&gt;&lt;a href=&quot;#构建工具选择&quot; class=&quot;headerlink&quot; title=&quot;构建工具选择&quot;&gt;&lt;/a&gt;构建工具选择&lt;/h3&gt;&lt;p&gt;针对不同的场景，选择最合适的工具&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteim</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack plugin</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack-plugin/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack-plugin/</id>
    <published>2022-06-30T07:17:34.496Z</published>
    <updated>2022-06-30T17:08:29.260Z</updated>
    
    <content type="html"><![CDATA[<p><code>webpack</code> 插件机制是整个 <code>webpack</code> 工具的骨架，而 <code>webpack</code> 本身也是利用这套插件机制构建出来的。</p><h2 id="Webpack-Plugin"><a href="#Webpack-Plugin" class="headerlink" title="Webpack Plugin"></a>Webpack Plugin</h2><p>专注处理 <code>webpack</code> 在编译过程中的某个特定的任务的功能模块，称为插件，最常见的如 <code>html-webpack-plugin</code>。</p><h3 id="完整的-webpack-插件需要满足以下几点规则和特征："><a href="#完整的-webpack-插件需要满足以下几点规则和特征：" class="headerlink" title="完整的 webpack 插件需要满足以下几点规则和特征："></a>完整的 webpack 插件需要满足以下几点规则和特征：</h3><ul><li>是一个独立的模块</li><li>模块对外暴露一个 <code>js</code> 函数</li><li>函数的原型 (<code>prototype</code>) 上定义了一个注入 <code>compiler</code> 对象的 <code>apply</code> 方法 <code>apply</code> 函数中需要有通过 <code>compiler</code> 对象挂载的 <code>webpack</code> 事件钩子，钩子的回调中能拿到当前编译的 <code>compilation</code> 对象，如果是异步编译插件的话可以拿到回调 <code>callback</code></li><li>完成自定义子编译流程并处理 <code>complition</code> 对象的内部数据</li><li>如果异步编译插件的话，数据处理完成后执行 <code>callback</code> 回调。</li></ul><h3 id="Webpakck插件的基本模型"><a href="#Webpakck插件的基本模型" class="headerlink" title="Webpakck插件的基本模型"></a>Webpakck插件的基本模型</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、BasicPlugin.js 文件（独立模块）</span></span><br><span class="line"><span class="comment">// 2、模块对外暴露的 js 函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicPlugin</span>&#123; </span><br><span class="line">    <span class="comment">//在构造函数中获取用户为该插件传入的配置</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">pluginOptions</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">options</span> = pluginOptions;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//3、原型定义一个 apply 函数，并注入了 compiler 对象</span></span><br><span class="line">    <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123; </span><br><span class="line">        <span class="comment">//4、挂载 webpack 事件钩子（这里挂载的是 emit 事件）</span></span><br><span class="line">        compiler.<span class="title function_">plugin</span>(<span class="string">&#x27;emit&#x27;</span>, <span class="keyword">function</span> (<span class="params">compilation, callback</span>) &#123;</span><br><span class="line">            <span class="comment">// ... 内部进行自定义的编译操作</span></span><br><span class="line">            <span class="comment">// 5、操作 compilation 对象的内部数据</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(compilation);</span><br><span class="line">            <span class="comment">// 6、执行 callback 回调</span></span><br><span class="line">            <span class="title function_">callback</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 7、暴露 js 函数</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">BasicPlugin</span>;</span><br></pre></td></tr></table></figure><p><code>Webpack</code> 启动后，在读取配置的过程中会先执行 <code>new BasicPlugin(options)</code> 初始化一个 <code>BasicPlugin</code> 并获得其实例。<br>在初始化 <code>Compiler</code> 对象后，再调用  <code>basicPlugin.apply (compiler)</code> 为插件实例传入 <code>compiler</code> 对象。<br>插件实例在获取到 <code>compiler</code> 对象后，就可以通过 <code>compiler. plugin</code> （事件名称 ，回调函数）监听到 <code>Webpack</code> 广播的事件，并且可以通过 <code>compiler</code> 对象去操作 <code>Webpack</code>。</p><h3 id="入参Compiler对象解释"><a href="#入参Compiler对象解释" class="headerlink" title="入参Compiler对象解释"></a>入参Compiler对象解释</h3><p><code>compiler</code> 对象是 <code>webpack</code> 的编译器对象，<code>compiler</code> 对象会在启动 <code>webpack</code> 的时候被一次性地初始化，<code>compiler</code> 对象中包含了所有 <code>webpack</code> 可自定义操作的配置，例如 <code>loader</code> 的配置，<code>plugin</code> 的配置，<code>entry</code> 的配置等各种原始 <code>webpack</code> 配置等，在 <code>webpack</code> 插件中的自定义子编译流程中，我们肯定会用到 <code>compiler</code> 对象中的相关配置信息，我们相当于可以通过 <code>compiler</code> 对象拿到 <code>webpack</code> 的主环境所有的信息。<a href="https://github.com/webpack/webpack/blob/10282ea20648b465caec6448849f24fc34e1ba3e/lib/webpack.js#L30">webpack部分源码</a>：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack/lib/webpack.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Compiler</span> = <span class="built_in">require</span>(<span class="string">&quot;./Compiler&quot;</span>)  </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">webpack</span> = (<span class="params">options, callback</span>) =&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    options = <span class="keyword">new</span> <span class="title class_">WebpackOptionsDefaulter</span>().<span class="title function_">process</span>(options) <span class="comment">// 初始化 webpack 各配置参数</span></span><br><span class="line">    <span class="keyword">let</span> compiler = <span class="keyword">new</span> <span class="title class_">Compiler</span>(options.<span class="property">context</span>)     <span class="comment">// 初始化 compiler 对象，这里 options.context 为 process.cwd()</span></span><br><span class="line">    compiler.<span class="property">options</span> = options                      <span class="comment">// 往 compiler 添加初始化参数</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">NodeEnvironmentPlugin</span>().<span class="title function_">apply</span>(compiler)<span class="comment">// 往 compiler 添加 Node 环境相关方法</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> plugin <span class="keyword">of</span> options.<span class="property">plugins</span>) &#123;</span><br><span class="line">        plugin.<span class="title function_">apply</span>(compiler);</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Compilation-对象"><a href="#Compilation-对象" class="headerlink" title="Compilation 对象"></a>Compilation 对象</h3><p><code>compilation</code> 对象代表了一次单一的版本 <code>webpack</code> 构建和生成编译资源的过程。当运行 <code>webpack</code> 开发环境中间件时，每当检测到一个文件变化，一次新的编译将被创建，从而生成一组新的编译资源以及新的 <code>compilation</code> 对象。一个 <code>compilation</code> 对象包含了 当前的模块资源、编译生成资源、变化的文件、以及 被跟踪依赖的状态信息。编译对象也提供了很多关键点回调供插件做自定义处理时选择使用。</p><p><code>Compiler</code> 和 <code>Compilation</code> 的区别在于： <code>Compiler</code> 代表了整个 <code>Webpack</code> 从启动到关闭的生命周期，而 <code>Compilation</code> 只代表一次新的编译。</p><h3 id="Tapable-amp-Tapable-实例"><a href="#Tapable-amp-Tapable-实例" class="headerlink" title="Tapable &amp; Tapable 实例"></a>Tapable &amp; Tapable 实例</h3><p><code>webpack</code> 的插件架构主要基于 <code>Tapable</code> 实现的，<code>Tapable</code> 是 <code>webpack</code> 项目组的一个内部库，主要是抽象了一套插件机制。它类似于 <code>NodeJS</code> 的 <code>EventEmitter</code> 类，专注于自定义事件的触发和操作。<code>Compilation</code> 和 <code>Compiler</code> 都继承于 <code>Tapable</code> ，除此之外, <code>Tapable</code> 允许你通过回调函数的参数访问事件的生产者。<br><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/17/16f12c65e694bac6~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="GitHub"></p><p><code>webpack</code> 本质上是一种事件流的机制，它的工作流程就是将各个插件串联起来，而实现这一切的核心就是 <code>Tapable</code> ，<code>webpack</code> 中最核心的负责编译的 <code>Compiler</code> 和负责创建 <code>bundles</code> 的 <code>Compilation</code> 都是 <code>Tapable</code> 的实例，<code>Tapable</code> 能够让我们为 <code>javaScript</code> 模块添加并应用插件。 它可以被其它模块继承或混合。</p><h4 id="钩子"><a href="#钩子" class="headerlink" title="钩子"></a>钩子</h4><ul><li><code>SyncBailHook</code>：只要监听函数中有一个函数的返回值不为 <code>null</code>，则跳过剩下所有的逻辑。</li><li><code>SyncWaterfallHook</code>：上一个监听函数的返回值可以传给下一个监听函数。</li><li><code>SyncLoopHook</code>：当监听函数被触发的时候，如果该监听函数返回 <code>true</code> 时则这个监听函数会反复执行，如果返回 <code>undefined</code> 则表示退出循环。</li><li><code>AsyncParallelHook</code>：异步并发，不关心监听函数的返回值</li><li><code>AsyncParallelBailHook</code>：只要监听函数的返回值不为 <code>null</code> ，就会忽略后面的监听函数执行，直接跳跃到 <code>callAsync</code> 等触发函数绑定的回调函数，然后执行这个被绑定的回调函数</li><li><code>AsyncSeriesHook</code>：异步串行，不关心 <code>callback()</code> 的参数</li><li><code>AsyncSeriesBailHook</code>：<code>callback()</code> 的参数不为 <code>null</code> ，就会直接执行 <code>callAsync</code>等触发函数绑定的回调函数</li><li><code>AsyncSeriesWaterfallHook</code>：上一个监听函数的中的 <code>callback(err, data)</code> 的第二个参数,可以作为下一个监听函数的参数</li><li>同步钩子，用 <code>tap</code> 方式注册；</li><li>异步钩子，有三种注册&#x2F;发布的模式，<code>tap</code>、<code>tapAsync</code>、<code>tapPromise</code>。</li></ul><h4 id="Tapable-模型"><a href="#Tapable-模型" class="headerlink" title="Tapable 模型"></a>Tapable 模型</h4><p><code>Tapable</code> 简化后的模型，就是发布订阅者模式。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SyncHook</span>&#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="title function_">tap</span>(<span class="params">name,fn</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">hooks</span>[name])</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">hooks</span>[name] = []</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">hooks</span>[name].<span class="title function_">push</span>(fn) </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">  <span class="title function_">call</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hooks</span>[name].<span class="title function_">forEach</span>(<span class="function"><span class="params">hook</span>=&gt;</span><span class="title function_">hook</span>(...<span class="variable language_">arguments</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Plugin调用流程"><a href="#Plugin调用流程" class="headerlink" title="Plugin调用流程"></a>Plugin调用流程</h2><ol><li>注册，类似于 EventEmitter 的 on</li></ol><p><a href="https://github.com/webpack/tapable/blob/42b520760e138c23e7808881cb4322557e878307/lib/Tapable.js#L35">对应源码</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">compiler.<span class="title function_">plugin</span>(<span class="string">&#x27;emit&#x27;</span>, <span class="function">(<span class="params">compilation, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 在生成资源并输出到目录之前完成某些逻辑</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Tapable.js</span></span><br><span class="line">options =&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">if</span>(hook !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> tapOpt = &#123;</span><br><span class="line">            <span class="attr">name</span>: options.<span class="property">fn</span>.<span class="property">name</span> || <span class="string">&quot;unnamed compat plugin&quot;</span>,</span><br><span class="line">            <span class="attr">stage</span>: options.<span class="property">stage</span> || <span class="number">0</span></span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="keyword">if</span>(options.<span class="property">async</span>)</span><br><span class="line">        <span class="comment">// 将插件中异步钩子的回调函数注入</span></span><br><span class="line">        hook.<span class="title function_">tapAsync</span>(tapOpt, options.<span class="property">fn</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        hook.<span class="title function_">tap</span>(tapOpt, options.<span class="property">fn</span>);</span><br><span class="line">        returntrue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>执行，类似于 EventEmitter 的emit</li></ol><p><a href="https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compiler.js#L307">对应源码</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">emit</span>.<span class="title function_">callAsync</span>(compilation, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="title function_">callback</span>(err);</span><br><span class="line">    outputPath = compilation.<span class="title function_">getPath</span>(<span class="variable language_">this</span>.<span class="property">outputPath</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outputFileSystem</span>.<span class="title function_">mkdirp</span>(outputPath, emitFiles);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Loader-amp-Plugin-开发调试"><a href="#Loader-amp-Plugin-开发调试" class="headerlink" title="Loader &amp; Plugin 开发调试"></a>Loader &amp; Plugin 开发调试</h2><h3 id="npm-link"><a href="#npm-link" class="headerlink" title="npm link"></a>npm link</h3><ol><li>确保正在开发的本地 <code>Loader</code> 模块的 <code>package.json</code> 已经配置好(最主要的 <code>main</code>字段的入口文件指向要正确)</li><li>在本地的 <code>Npm</code> 模块根目录下执行 <code>npm link</code>，将本地模块注册到全局</li><li>在项目根目录下执行 <code>npm link loader-name</code> ，将第 2 步注册到全局的本地 <code>Npm</code> 模块链接到项目的 <code>node moduels</code> 下，其中的 <code>loader-name</code> 是指在第 1 步的 <code>package.json</code> 文件中配置的模块名称</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;uploadtoserverplugin&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \ &quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;scp2&quot;: &quot;^0.5.0&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Npm link</code> 专门用于开发和调试本地的 <code>Npm</code> 模块，能做到在不发布模块的情况下， 将本地的一个正在开发的模块的源码链接到项目的 <code>node_modules</code> 目录下，让项目可以直接使 用本地的 <code>Npm</code> 模块。由于是通过软链接的方式实现的，编辑了本地的 <code>Npm</code> 模块的代码，所以在项目中也能使用到编辑后的代码。</p><p><code>Plugin</code> 部分也出过完整文章，可以看这里：<a href="https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649825806&idx=1&sn=e46dbd274e240c4dcc4b778d8b30c67d&chksm=f175e8cdc60261db3c0caa44fd58e8d759526e5bb5b6e2caebba957a5996931cc68c18e69d37&scene=21#wechat_redirect">webpack 插件机制分析及开发调试</a></p><h3 id="Resolveloader"><a href="#Resolveloader" class="headerlink" title="Resolveloader"></a>Resolveloader</h3><p><code>ResolveLoader</code> 用于配置 <code>Webpack</code> 如何寻找 <code>Loader</code> ，它在默认情况下只会去 <code>node_modules</code> 目录下寻找。为了让 <code>Webpack</code> 加载放在本地项目中的 <code>Loader</code> ，需要修改 <code>resolveLoader.modules</code>。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//假设本地项目中的 Loader 在项目目录的 ./loaders/loader-name 下</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">resolveLoader</span>:&#123;</span><br><span class="line">        <span class="comment">//去哪些目录下寻找 Loader ，有先后顺序之分</span></span><br><span class="line">        modules :[<span class="string">&#x27;node modules&#x27;</span>,<span class="string">&#x27;./loaders/&#x27;</span>],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;webpack&lt;/code&gt; 插件机制是整个 &lt;code&gt;webpack&lt;/code&gt; 工具的骨架，而 &lt;code&gt;webpack&lt;/code&gt; 本身也是利用这套插件机制构建出来的。&lt;/p&gt;
&lt;h2 id=&quot;Webpack-Plugin&quot;&gt;&lt;a href=&quot;#W</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack loader</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack-loader/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack-loader/</id>
    <published>2022-06-30T07:17:20.748Z</published>
    <updated>2022-06-30T17:08:22.088Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Webpack-Loader"><a href="#Webpack-Loader" class="headerlink" title="Webpack Loader"></a>Webpack Loader</h2><p><code>Loader</code> 就像一个翻译员，能将源文件经过转化后输出新的结果，并且一个文件还可以链式地经过多个翻译员翻译。</p><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><ul><li>一个 <code>Loader</code> 的职责是单一的，只需要完成一种转换</li><li>一个 <code>Loader</code> 其实就是一个 <code>Node.js</code> 模块，这个模块需要导出一个函数</li></ul><h3 id="开发-Loader-形式"><a href="#开发-Loader-形式" class="headerlink" title="开发 Loader 形式"></a>开发 <code>Loader</code> 形式</h3><ol><li>基本形式</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123; </span><br><span class="line">    <span class="keyword">return</span> source; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>调用第三方模块</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sass= <span class="built_in">require</span>(<span class="string">&#x27;node-sass&#x27;</span>); </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">sass</span>(source);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于 <code>Loader</code> 运行在 <code>Node.js</code> 中，所以我们可以调用任意 <code>Node.js</code> 自带的 <code>API</code> ，或者安装第三方模块进行调用</p><ol start="3"><li>调用 <code>Webpack</code> 的 <code>Api</code></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取用户为 Loader 传入的 options</span></span><br><span class="line"><span class="keyword">const</span> loaderUtils =<span class="built_in">require</span> (<span class="string">&#x27;loader-utils&#x27;</span>); </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">source</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> options= loaderUtils.<span class="title function_">getOptions</span>(<span class="variable language_">this</span>); </span><br><span class="line">    <span class="keyword">return</span> source; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回sourceMap</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">source</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callback</span>(<span class="literal">null</span>, source, sourceMaps); </span><br><span class="line">    <span class="comment">//当使用 this.callback 返回内容时 ，该 Loader 必须返回 undefined,</span></span><br><span class="line">    <span class="comment">//以让 Webpack 知道该 Loader 返回的结果在 this.callback 中，而不是 return中</span></span><br><span class="line">    <span class="keyword">return</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">source</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> callback = <span class="variable language_">this</span>.<span class="title function_">async</span>()</span><br><span class="line">    <span class="title function_">someAsyncOperation</span>(source, <span class="function">(<span class="params">err, result, sourceMaps, ast</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 通过 callback 返回异步执行后的结果</span></span><br><span class="line">        <span class="title function_">callback</span>(err, result, sourceMaps, ast)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//缓存加速</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">source</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="comment">//关闭该 Loader 的缓存功能</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">cacheable</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">return</span> source </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>source</code> 参数是 <code>compiler</code> 传递给 <code>Loader</code> 的一个文件的原内容，这个函数需要返回处理后的内容，这里为了简单起见，直接将原内容返回了，相当于该 <code>Loader</code> 有做任何转换.这里结合了 <code>webpack</code> 的 <code>api</code> 和第三方模块之后，可以说 <code>loader</code> 可以做的事情真的非常非常多了…</p><p>更多的 <code>webpack Api</code> 可以看<a href="https://webpack.js.org/api/loaders">官方文档</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Webpack-Loader&quot;&gt;&lt;a href=&quot;#Webpack-Loader&quot; class=&quot;headerlink&quot; title=&quot;Webpack Loader&quot;&gt;&lt;/a&gt;Webpack Loader&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Loader&lt;/code&gt; 就像</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack4基本打包机制</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack4%E5%9F%BA%E6%9C%AC%E6%89%93%E5%8C%85%E6%9C%BA%E5%88%B6/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack4%E5%9F%BA%E6%9C%AC%E6%89%93%E5%8C%85%E6%9C%BA%E5%88%B6/</id>
    <published>2022-06-30T07:17:04.684Z</published>
    <updated>2022-06-30T17:10:19.901Z</updated>
    
    <content type="html"><![CDATA[<h2 id="webpack4基本打包机制"><a href="#webpack4基本打包机制" class="headerlink" title="webpack4基本打包机制"></a>webpack4基本打包机制</h2><p>本质上，<code>webpack</code> 是一个现代 <code>JavaScript</code> 应用程序的静态模块打包器(<code>module bundler</code>)。当 <code>webpack</code> 处理应用程序时，它会递归地构建一个依赖关系图(<code>dependency graph</code>)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <code>bundle</code> 。</p><h3 id="简单版打包模型"><a href="#简单版打包模型" class="headerlink" title="简单版打包模型"></a>简单版打包模型</h3><p>先从简单入手，当 <code>webpack</code> 的配置只有一个出口时，不考虑分包的情况，其实只得到了一个 <code>bundle.js</code> 的文件，这个文件里包含了所有用到的 <code>js</code> 模块，可以直接被加载执行。那么，可以分析一下它的打包思路，大概有以下4步：</p><ol><li>利用 <code>babel</code> 完成代码转换,并生成单个文件的依赖模块Map</li><li>从入口开始递归分析，并生成依赖图谱</li><li>将各个引用模块打包为一个立即执行函数</li><li>将最终的 <code>bundle</code> 文件写入 <code>bundle.js</code> 中</li></ol><p><a href="https://github.com/LuckyWinty/blog/tree/master/code/bundleBuild">见完整代码</a></p><h3 id="webpack打包过程："><a href="#webpack打包过程：" class="headerlink" title="webpack打包过程："></a>webpack打包过程：</h3><ol><li><strong>初始化参数</strong> 从配置文件和 <code>Shell</code> 语句中读取与合并参数，得出最终的参数</li><li><strong>开始编译</strong> 用上一步得到的参数初始 <code>Compiler</code> 对象，加载所有配置的插件，通 过执行对象的 <code>run</code>方法开始执行编译</li><li><strong>确定入口</strong> 根据配置中的 <code>Entry</code> 找出所有入口文件</li><li><strong>编译模块</strong> 从入口文件出发，调用所有配置的 <code>Loader</code> 对模块进行编译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理</li><li><strong>完成模块编译</strong> 在经过第4步使用 <code>Loader</code> 翻译完所有模块后， 得到了每个模块被编译后的最终内容及它们之间的依赖关系</li><li><strong>输出资源</strong> 根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 <code>Chunk</code> ,再将每个 <code>Chunk</code> 转换成一个单独的文件加入输出列表中，这是可以修改输出内容的最后机会</li><li><strong>输出完成</strong> 在确定好输出内容后，根据配置确定输出的路径和文件名，将文件的内容写入文件系统中。</li></ol><p>整个流程概括为3个阶段，初始化、编译、输出。而在每个阶段中又会发生很多事件，Webpack会将这些事件广播出来供Plugin使用。具体钩子，可以看<a href="https://webpack.js.org/api/compiler-hooks/#hooks">官方文档</a>。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;webpack4基本打包机制&quot;&gt;&lt;a href=&quot;#webpack4基本打包机制&quot; class=&quot;headerlink&quot; title=&quot;webpack4基本打包机制&quot;&gt;&lt;/a&gt;webpack4基本打包机制&lt;/h2&gt;&lt;p&gt;本质上，&lt;code&gt;webpack&lt;/cod</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack使用指南（阮一峰）</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/webpack%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%EF%BC%88%E9%98%AE%E4%B8%80%E5%B3%B0%EF%BC%89/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/webpack%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%EF%BC%88%E9%98%AE%E4%B8%80%E5%B3%B0%EF%BC%89/</id>
    <published>2022-06-30T07:14:30.749Z</published>
    <updated>2022-06-30T17:10:30.479Z</updated>
    
    <content type="html"><![CDATA[<h2 id="阮一峰仓库"><a href="#阮一峰仓库" class="headerlink" title="阮一峰仓库"></a><a href="https://github.com/ruanyf/webpack-demos">阮一峰仓库</a></h2><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先，全局安装Webpack和webpack-dev-server</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g webpack webpack-dev-server</span><br></pre></td></tr></table></figure><p>然后，clone阮一峰的仓库</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ruanyf/webpack-demos.git</span><br></pre></td></tr></table></figure><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> webpack-demos</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>然后再输入安装cli的指令</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g webpack-cli</span><br></pre></td></tr></table></figure><p>现在开始进入目录webpack-demos并且运行它们</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_1</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>上面的代码不会自动的打开你的浏览器，需要手动访问 <code>http://127.0.0.1:8080</code></p><h2 id="Webpack简介"><a href="#Webpack简介" class="headerlink" title="Webpack简介"></a>Webpack简介</h2><h3 id="局部安装"><a href="#局部安装" class="headerlink" title="局部安装"></a>局部安装</h3><p>全局webpack这会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。<br>所以我们需要在项目中安装局部webpack</p><p>首先，每一个项目一开始都需要初始化！</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p>然后，会看到项目根目录下多了一个package.json文件，里面存储着我们项目所使用的各个包的版本</p><p>然后，安装webpack及webpack-cli</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev webpack  </span><br><span class="line">npm install --save-dev webpack-cli</span><br></pre></td></tr></table></figure><p>然后webpack会安装到我们的项目根目录下，同时会多了一个package-lock.json文件<br><img src="https://segmentfault.com/img/remote/1460000021706833"></p><p>Webpack用于构建Javascript模块脚本来给浏览器使用的前端工具。</p><h3 id="打包命令一（没有配置时）"><a href="#打包命令一（没有配置时）" class="headerlink" title="打包命令一（没有配置时）"></a>打包命令一（没有配置时）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">webpack main.js --output-filename bundle.js --output-path . --mode development</span><br></pre></td></tr></table></figure><p>简写</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">webpack main.js -o bundle.js --mode development</span><br></pre></td></tr></table></figure><h3 id="打包命令二（配置了package-json的scripts）"><a href="#打包命令二（配置了package-json的scripts）" class="headerlink" title="打包命令二（配置了package.json的scripts）"></a>打包命令二（配置了package.json的scripts）</h3><p>可以在 <code>package.json </code>中的 <code>scripts</code>选项中进行定制，如下所示</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-demo1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode development&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode production&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="打包命令三（配置了webpack-config-js）"><a href="#打包命令三（配置了webpack-config-js）" class="headerlink" title="打包命令三（配置了webpack.config.js）"></a>打包命令三（配置了webpack.config.js）</h3><p>由于webpack更新4.0后，很多要求的变严格了，如果不更新配置的话，不但会影响打包速度，而已会不断的输出提示。</p><p>创建一个webpack.config.js配置文件，这个文件就是一个CommonJS的模块（module）</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js的内容</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个配置文件就是一个JS文件，通过Mode中的模块操作，向外暴露一个配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//手动指定入口和出口</span></span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包到哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//出口，表示输出到哪个目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,<span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode模式</span></span><br><span class="line">  <span class="attr">watch</span>: <span class="literal">true</span>,<span class="comment">// 监听文件改动，自动打包</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>当建好 <code>webpack.config.js</code>后就能直接运行Webpack，而不加参数</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">webpack</span><br></pre></td></tr></table></figure><p>有一些必须知道的参数选项如下</p><ul><li><code>webpack</code>——开发时的构建命令</li><li><code>webpack -p</code>——发布产品时的构建命令</li><li><code>webpack --watch</code>——用于增量开发的构建</li><li><code>webpack -d</code>——包括source maps</li><li><code>webpack --colors</code>——让构建输出更好看</li></ul><h2 id="Demo-1——入口文件"><a href="#Demo-1——入口文件" class="headerlink" title="Demo_1——入口文件"></a>Demo_1——入口文件</h2><p>入口文件由Webpack读取，然后构建 <code>bundle.js</code></p><p>例如下面，<code>main.js</code>就是一个入口文件</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;Hello World&lt;/h1&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Webpack依据 <code>webpack.config.js</code>来构建 <code>bundle.js</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个配置文件就是一个JS文件，通过Mode中的模块操作，向外暴露一个配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//手动指定入口和出口</span></span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span><span class="comment">//设置mode</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_1</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-2——多个入口文件"><a href="#Demo-2——多个入口文件" class="headerlink" title="Demo_2——多个入口文件"></a>Demo_2——多个入口文件</h2><p><code>Webpack</code>允许多个入口文件存在，在多页面的app中很有用，每个页面有不同的入口文件。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main1.js</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;Hello World&lt;/h1&gt;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// main2.js</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h2&gt;Hello Webpack&lt;/h2&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个配置文件就是一个JS文件，通过Mode中的模块操作，向外暴露一个配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//手动指定入口和出口</span></span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main1.js&#x27;</span>),</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main2.js&#x27;</span>),</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span><span class="comment">//设置mode</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_2</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-3——Babel-loader"><a href="#Demo-3——Babel-loader" class="headerlink" title="Demo_3——Babel-loader"></a>Demo_3——Babel-loader</h2><p>加载器(Loaders)是预处理器，让webpack处理非js文件，将所有的文件转换为webpack能够处理的有效模块。</p><p>loader的两个目标</p><ul><li>识别出应该被loader转化的文件， 使用test属性</li><li>转换这些文件，使他们添加到依赖图中，最终添加到bundle中，使用use属性</li></ul><p>babel-loader 是一个将jsx、es6格式的文件转换为js文件的工具</p><p><code>main.jsx</code>是一个JSX文件</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.jsx</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">React</span> = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ReactDOM</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dom&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#wrapper&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.jsx&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上面的代码里需要babel-loader的两个插件babel-preset-es2015和babel-preset-react来转换ES6和React(翻译：现在为废弃了，<a href="https://link.juejin.cn/?target=http://babeljs.io/docs/en/env/" title="http://babeljs.io/docs/en/env/">详情</a>)</p><h2 id="Demo-4——CSS-loader"><a href="#Demo-4——CSS-loader" class="headerlink" title="Demo_4——CSS-loader"></a>Demo_4——CSS-loader</h2><p>Webpack允许在JS文件中包含CSS，需要CSS-loader对这些CSS进行处理</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./app.css&#x27;</span>);</span><br></pre></td></tr></table></figure><p>app.css</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>注意！必须使用两个加载器来转换CSS文件。CSS-loader用来读取CSS文件来转换，另一个Style-loader用来往HTML中插入 <code>&lt;style&gt;</code>标签。</p><p>然后打开server</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_4</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>事实上，Webpack将CSS文件的内容直接插入到 <code>index.html</code></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Demo-5——Image-loader"><a href="#Demo-5——Image-loader" class="headerlink" title="Demo_5——Image loader"></a>Demo_5——Image loader</h2><p>Webpack能够将图片包含进JS文件中</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> img1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">img1.<span class="property">src</span> = <span class="built_in">require</span>(<span class="string">&quot;./small.png&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(img1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> img2 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">img2.<span class="property">src</span> = <span class="built_in">require</span>(<span class="string">&quot;./big.png&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(img2);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">limit</span>: <span class="number">8192</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>url-loader</code>将image文件转为 <code>&lt;img&gt;</code>标签，如果图片大小&lt;8192字节，它将转换为Data url（翻译：图片变为Base64编码，减少请求次数），否则，他将转为普通文件URL。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;data:image/png;base64,iVBOR...uQmCC&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;4853ca667a2b8b8844eb2693ac1b2578.png&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_5</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-6——CSS-Module"><a href="#Demo-6——CSS-Module" class="headerlink" title="Demo_6——CSS Module"></a>Demo_6——CSS Module</h2><p><code>css-loader?modules</code>（请求参数为modules）能够使用CSS Module，CSS Module带给你的JS文件模块中的CSS一个局部作用域，也可以使用 <code>:global(selector)</code>让CSS变为全局作用。</p><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;h1&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;h2&quot;</span>&gt;</span>Hello Webpack<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>app.css</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* local scope */</span></span><br><span class="line"><span class="selector-class">.h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* global scope */</span></span><br><span class="line">:<span class="built_in">global</span>(.h2) &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>main.jsx</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">React</span> = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ReactDOM</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dom&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> style = <span class="built_in">require</span>(<span class="string">&#x27;./app.css&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;style.h1&#125;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&quot;h2&quot;</span>&gt;</span>Hello Webpack<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;example&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js[x]?$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;style-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">             <span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">             <span class="attr">options</span>: &#123;</span><br><span class="line">               <span class="attr">modules</span>: <span class="literal">true</span></span><br><span class="line">             &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>访问<a href="https://link.juejin.cn/?target=http://127.0.0.1:8080" title="http://127.0.0.1:8080"> http://127.0.0.1:8080</a>会看到只有 <code>h1</code>是红色的，因为他的CSS是局部作用域，然后所以 <code>h2</code>都是蓝色的，因为它是全局作用域。</p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_6</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-7——UglifyJs-Plugin"><a href="#Demo-7——UglifyJs-Plugin" class="headerlink" title="Demo_7——UglifyJs Plugin"></a>Demo_7——UglifyJs Plugin</h2><p>Webpack用插件系统来扩展他的功能。例如，<a href="https://link.juejin.cn/?target=https://webpack.js.org/plugins/uglifyjs-webpack-plugin/" title="https://webpack.js.org/plugins/uglifyjs-webpack-plugin/">UglifyJs Plugin</a>，它用来压缩JS代码，使得JS文件体积变小。</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> longVariableName = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line">longVariableName += <span class="string">&#x27; World&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;&#x27;</span> + longVariableName + <span class="string">&#x27;&lt;/h1&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">UglifyJsPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">UglifyJsPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在访问服务器后，可以看到 <code>main.js</code>最小化为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var o=&quot;Hello&quot;;o+=&quot; World&quot;,document.write(&quot;&lt;h1&gt;&quot;+o+&quot;&lt;/h1&gt;&quot;)</span><br></pre></td></tr></table></figure><p>（翻译：是在 <code>bundle.js</code>的最后几个代码那，是这些代码）</p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_7</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-8——HTML-Webpack-Plugin和Open-Browser-Webpack-Plugin"><a href="#Demo-8——HTML-Webpack-Plugin和Open-Browser-Webpack-Plugin" class="headerlink" title="Demo_8——HTML Webpack Plugin和Open Browser Webpack Plugin"></a>Demo_8——HTML Webpack Plugin和Open Browser Webpack Plugin</h2><p>这个demo用来展示如何加载第三方插件</p><p><code>html-webpack-plugin</code>能为你创建 <code>index.html</code>，<code>open-browser-webpack-plugin</code>能够在Webpack加载时打开一个新的浏览器标签(tab)</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;Hello World&lt;/h1&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">HtmlwebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OpenBrowserPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;open-browser-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlwebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Webpack-demos&#x27;</span>,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">OpenBrowserPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>现在你不用手动创建 <code>index.html</code>也不用手动打开浏览器了。</p><h2 id="Demo-9——环境变量-Environment-flags"><a href="#Demo-9——环境变量-Environment-flags" class="headerlink" title="Demo_9——环境变量(Environment flags)"></a>Demo_9——环境变量(Environment flags)</h2><p>使用环境变量让一些代码只能在开发环境时使用。</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;Hello World&lt;/h1&gt;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> devFlagPlugin = <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">  <span class="attr">__DEV__</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(process.<span class="property">env</span>.<span class="property">DEBUG</span> || <span class="string">&#x27;false&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//设置mode</span></span><br><span class="line">  <span class="attr">plugins</span>: [devFlagPlugin]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>现在传递环境变量给Webpack。打开 <code>demo09/package.json</code>，找到如下 <code>scripts</code>选项</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-demo_9&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env DEBUG=true webpack-dev-server --open&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode production&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_9</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-10——代码分离"><a href="#Demo-10——代码分离" class="headerlink" title="Demo_10——代码分离"></a>Demo_10——代码分离</h2><p>在大型web应用中，将所有代码放入一个文件是十分低效的。Webpack允许你将大型JS文件分成多块。特别的，如果一些代码块只是在某些情况下需要，那么这些代码块会按需加载。</p><p>Webpack使用 <code>require.ensure</code>来定义一个分割点</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>.<span class="title function_">ensure</span>([<span class="string">&#x27;./a&#x27;</span>], <span class="keyword">function</span> (<span class="params"><span class="built_in">require</span></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> content = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>);   </span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">open</span>();</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;&#x27;</span> + content + <span class="string">&#x27;&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>require.ensure</code>告诉Webpack <code>./a,js</code>需要从 <code>bundle.js</code>中分离出来作为一个单独的块文件</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br></pre></td></tr></table></figure><p>现在Webpack关心依赖、输出文件、运行时的东西。你不必将多余的东西放到 <code>index.html</code>和 <code>webpack.config.js</code>中</p><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个配置文件就是一个JS文件，通过Mode中的模块操作，向外暴露一个配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//手动指定入口和出口</span></span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./main.js&#x27;</span>),<span class="comment">//入口，表示打包哪个文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./&#x27;</span>),<span class="comment">//指定打包好的文件，输入到哪个目录中</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span><span class="comment">//指定输出的文件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span><span class="comment">//设置mode</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>访问服务器后，你感觉不到任何不同。实际上，Webpack将构建 <code>main.js</code>和 <code>a.js</code>到不同的块中（<code>bundle.js</code>和 <code>0.bundle.js</code>），然后从 <code>bundle.js</code>中按需加载 <code>0.bundle.js</code></p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_10</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-11——bundle-loader下的代码分离"><a href="#Demo-11——bundle-loader下的代码分离" class="headerlink" title="Demo_11——bundle-loader下的代码分离"></a>Demo_11——bundle-loader下的代码分离</h2><p>另一个代码分割的方式是 <code>bundle-loader</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Now a.js is requested, it will be bundled into another file</span></span><br><span class="line"><span class="keyword">var</span> load = <span class="built_in">require</span>(<span class="string">&#x27;bundle-loader!./a.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// To wait until a.js is available (and get the exports)</span></span><br><span class="line"><span class="comment">//  you need to async wait for it.</span></span><br><span class="line"><span class="title function_">load</span>(<span class="keyword">function</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">open</span>();</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h1&gt;&#x27;</span> + file + <span class="string">&#x27;&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>require(&#39;bundle-loader!./a.js&#39;)</code>告诉Webpack从其他块加载 <code>a.js</code></p><p>现在 <code>main.js</code>构建为 <code>bundle.js</code>，<code>a.js</code>构建为 <code>0.bundle.js</code></p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_11</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-12——通用块"><a href="#Demo-12——通用块" class="headerlink" title="Demo_12——通用块"></a>Demo_12——通用块</h2><p>在多个JS脚本中有通用块，通过 <code>CommonsChunkPlugin</code>你能提取不同文件中的通用部分，对于浏览器缓存来节省带宽是非常有用的。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main1.jsx</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">React</span> = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ReactDOM</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dom&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// main2.jsx</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">React</span> = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ReactDOM</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dom&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello Webpack<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;a&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;b&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;commons.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上面的 <code>commons.js</code>是 <code>main1.jsx</code>和 <code>main2.jsx</code>的通用部分。正如你想的，<code>commons.js</code>包括 <code>react</code>和 <code>react-dom</code></p><p>Webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">bundle1</span>: <span class="string">&#x27;./main1.jsx&#x27;</span>,</span><br><span class="line">    <span class="attr">bundle2</span>: <span class="string">&#x27;./main2.jsx&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js[x]?$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="property">optimize</span>.<span class="title class_">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;commons&quot;</span>,</span><br><span class="line">      <span class="comment">// (the commons chunk name)</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;commons.js&quot;</span>,</span><br><span class="line">      <span class="comment">// (the filename of the commons chunk)</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_12</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-13——Vendor-chunk"><a href="#Demo-13——Vendor-chunk" class="headerlink" title="Demo_13——Vendor chunk"></a>Demo_13——Vendor chunk</h2><p>通过 <code>CommonsChunkPlugin</code>,你能从JS脚本提取官方库到单独的文件中</p><p>main.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">&#x27;jquery&#x27;</span>);</span><br><span class="line">$(<span class="string">&#x27;h1&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vendor.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&#x27;./main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">vendor</span>: [<span class="string">&#x27;jquery&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="property">optimize</span>.<span class="title class_">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;vendor&#x27;</span>,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;vendor.js&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上面的代码中，<code>entry.vendor:[&#39;jquery&#39;]</code>告诉Webpack，<code>jquery</code>应该被包括到通用块 <code>vendor.js</code>中。</p><p>如果你想要一个模块作为全局变量来在不同的模块中使用，比如不用在每个文件中 <code>require(&#39;jquery&#39;)</code>，而是让 <code>$</code>或者 <code>jQuery</code>作为全局变量，需要使用 <code>ProvidePlugin</code>，它能够自动加载模块而不需要到处 <code>import</code>或者是 <code>require</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">$(<span class="string">&#x27;h1&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&#x27;./main.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">ProvidePlugin</span>(&#123;</span><br><span class="line">      <span class="attr">$</span>: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">      <span class="attr">jQuery</span>: <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>当然，在Demo13中，你需要自己全局加载 <code>jquery.js</code></p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_13</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-14——公开全局变量"><a href="#Demo-14——公开全局变量" class="headerlink" title="Demo_14——公开全局变量"></a>Demo_14——公开全局变量</h2><p>如果你想用一些全局变量，不需要在Webpack包中包含他们，你可以使用webpack.config.js里的 <code>externals</code>字段</p><p>例如，我们有一个 <code>data.js</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// data.js</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;Hello World&#x27;</span>;</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;data.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注意，Webpack只会构建 <code>bundle.js</code>, 而不会构建 <code>data.js</code></p><p>我们可以把 <code>data</code>作为全局变量</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./main.jsx&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js[x]?$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">externals</span>: &#123;</span><br><span class="line">    <span class="comment">// require(&#x27;data&#x27;) is external and available</span></span><br><span class="line">    <span class="comment">//  on the global var data</span></span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: <span class="string">&#x27;data&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>此时，你可以 <code>require(&#39;data&#39;)</code>作为模块变量，实际上它是一个全局变量</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.jsx</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="built_in">require</span>(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">React</span> = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ReactDOM</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dom&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>同样可以将 <code>react</code>和 <code>react-dom</code>放入 <code>externals</code>，这样显著的降低构建 <code>bundle.js</code>的时间和文件大小</p><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_14</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Demo-15——React-router"><a href="#Demo-15——React-router" class="headerlink" title="Demo_15——React router"></a>Demo_15——React router</h2><p>这个Demo使用Webpack来构建React router的官方样例</p><p>先想象一个有控制板、收件箱、日历的小应用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------------------------------------------------------+</span><br><span class="line">| +---------+ +-------+ +--------+                        |</span><br><span class="line">| |Dashboard| | Inbox | |Calendar|      Logged in as Jane |</span><br><span class="line">| +---------+ +-------+ +--------+                        |</span><br><span class="line">+---------------------------------------------------------+</span><br><span class="line">|                                                         |</span><br><span class="line">|                        Dashboard                        |</span><br><span class="line">|                                                         |</span><br><span class="line">|                                                         |</span><br><span class="line">|   +---------------------+    +----------------------+   |</span><br><span class="line">|   |                     |    |                      |   |</span><br><span class="line">|   | +              +    |    +---------&gt;            |   |</span><br><span class="line">|   | |              |    |    |                      |   |</span><br><span class="line">|   | |   +          |    |    +-------------&gt;        |   |</span><br><span class="line">|   | |   |    +     |    |    |                      |   |</span><br><span class="line">|   | |   |    |     |    |    |                      |   |</span><br><span class="line">|   +-+---+----+-----+----+    +----------------------+   |</span><br><span class="line">|                                                         |</span><br><span class="line">+---------------------------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>index.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span>, <span class="title class_">Switch</span>, <span class="title class_">Route</span>, <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./app.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/app&quot;</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/inbox&quot;</span>&gt;</span>Inbox<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/calendar&quot;</span>&gt;</span>Calendar<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Logged in as Jane</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Dashboard&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/app&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Dashboard&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/inbox&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Inbox&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/calendar&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Calendar&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;*&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Dashboard&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dashboard</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Inbox</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Inbox<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calendar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Calendar<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>((</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;App&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">), <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>));</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">htmL</span>&gt;</span></span><br></pre></td></tr></table></figure><p>运行下面的命令然后访问 <code>http://127.0.0.1:8080</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> demo_15</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;阮一峰仓库&quot;&gt;&lt;a href=&quot;#阮一峰仓库&quot; class=&quot;headerlink&quot; title=&quot;阮一峰仓库&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/ruanyf/webpack-demos&quot;&gt;阮一峰仓库&lt;/a&gt;&lt;/h2&gt;&lt;h2 id=</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>优化webpack打包速度</title>
    <link href="https://superq314.github.io/2022/06/30/webpack/%E4%BC%98%E5%8C%96webpack%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6/"/>
    <id>https://superq314.github.io/2022/06/30/webpack/%E4%BC%98%E5%8C%96webpack%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6/</id>
    <published>2022-06-30T06:48:36.128Z</published>
    <updated>2022-06-30T17:08:13.096Z</updated>
    
    <content type="html"><![CDATA[<h2 id="优化思路"><a href="#优化思路" class="headerlink" title="优化思路"></a>优化思路</h2><p>既然许多情况下编译less模块不是必须的，那在这些情况下单独编译js模块就能大幅提升webpack的性能。毕竟less的编译、以及css的抽出都非常消耗时间。</p><h2 id="优化步骤"><a href="#优化步骤" class="headerlink" title="优化步骤"></a>优化步骤</h2><p>优化包含以下两步：</p><ul><li>区分编译目标，单独编译js?  还是单独编辑css？  还是js+css?</li><li>入口文件分离js和css</li></ul><h3 id="1-区分编译目标"><a href="#1-区分编译目标" class="headerlink" title="1 区分编译目标"></a>1 区分编译目标</h3><p>这一步比较简单，我们需要使用 <code>cross-env</code>这个插件，例如下面两条编译命令区分了编译js和编译js+css。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build:js&quot;: &quot;cross-env ctarget=all webpack&quot;,</span><br><span class="line">    &quot;biuld:js+css&quot;: &quot;cross-env ctarget=js webpack&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样我们就可以在webpack配置文件中通过 <code>process.env.ctarget</code>区分当前编译目标了。</p><h3 id="2-分离js和css"><a href="#2-分离js和css" class="headerlink" title="2 分离js和css"></a>2 分离js和css</h3><p>这一步需要通过webpack的loader来实现，可以使用现有的轮子 <code>string-replace-loader</code>。</p><p>这个loader可以在编译阶段修改代码，并且可以使用正则表达式进行替换。可以使用它来加载js文件，然后删除部分代码。下面的例子的作用是删除js文件中所有的less代码导入。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /.js$/,</span><br><span class="line">                use: (function() &#123;</span><br><span class="line">                    var list = [&#x27;这里可以加上其他需要的loader&#x27;]; </span><br><span class="line">                    // 更具编译目标删除less的导入</span><br><span class="line">                    if (process.env.ctarget === &#x27;js&#x27;) &#123;</span><br><span class="line">                        list.push(&#123;</span><br><span class="line">                            loader: &#x27;string-replace-loader&#x27;,</span><br><span class="line">                            options: &#123;</span><br><span class="line">                                search: &#x27;^.+?require\\(.+(\\.less).+$&#x27;,</span><br><span class="line">                                replace: &#x27;&#x27;,</span><br><span class="line">                                flags: &#x27;m&#x27;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                    return list;</span><br><span class="line">                &#125;) ()</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里在使用 <code>string-replace-loader</code>一定要加上 <code>flags: &#39;m&#39;</code>，否则无法进行多行匹配。</p><blockquote><p>如果要单独打包css我们可以写一个和 <code>string-replace-loader</code>作用相反的loader，只保留样式部分而删除其他js代码。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;优化思路&quot;&gt;&lt;a href=&quot;#优化思路&quot; class=&quot;headerlink&quot; title=&quot;优化思路&quot;&gt;&lt;/a&gt;优化思路&lt;/h2&gt;&lt;p&gt;既然许多情况下编译less模块不是必须的，那在这些情况下单独编译js模块就能大幅提升webpack的性能。毕竟less的编译</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    <category term="webpack" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/webpack/"/>
    
    
    <category term="webpack" scheme="https://superq314.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>知识点</title>
    <link href="https://superq314.github.io/2022/06/30/%E6%9D%82%E7%B1%BB/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>https://superq314.github.io/2022/06/30/%E6%9D%82%E7%B1%BB/%E7%9F%A5%E8%AF%86%E7%82%B9/</id>
    <published>2022-06-30T03:08:43.259Z</published>
    <updated>2022-06-30T06:42:35.803Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java程序的基本结构"><a href="#Java程序的基本结构" class="headerlink" title="Java程序的基本结构"></a>Java程序的基本结构</h2><h3 id="Java程序（类）-x2F-静态方法（函数）库-x2F-数据类型"><a href="#Java程序（类）-x2F-静态方法（函数）库-x2F-数据类型" class="headerlink" title="Java程序（类）&#x2F;静态方法（函数）库&#x2F;数据类型"></a>Java程序（类）&#x2F;静态方法（函数）库&#x2F;数据类型</h3><ul><li>原始数据类型：定义整数、浮点数、布尔值</li><li>语句：声明、赋值、条件、循环、调用、返回</li><li>数组</li><li>静态方法：可以封装并重用代码，可作为独立的模块开发程序</li><li>字符串</li><li>标准输入&#x2F;输出</li><li>数据抽象：数据抽象封装和重用代码，可用于定义非原始数据类型，进而支持面向对象编程</li></ul><h3 id="原始数据类型及表达式"><a href="#原始数据类型及表达式" class="headerlink" title="原始数据类型及表达式"></a>原始数据类型及表达式</h3><h4 id="四种最基本的原始数据类型"><a href="#四种最基本的原始数据类型" class="headerlink" title="四种最基本的原始数据类型"></a>四种最基本的原始数据类型</h4><p>整型，及其算术运算符（int）——32位</p><p>浮点型，及其算术运算符（double）——64位</p><p>布尔型，其值{true、false}及其逻辑操作（boolean）</p><p>字符型，其值为可支持的英文字母数字字符和符号（char）</p><h4 id="其他五种原始数据类型"><a href="#其他五种原始数据类型" class="headerlink" title="其他五种原始数据类型"></a>其他五种原始数据类型</h4><p>64位整数，及其算术运算符（long）</p><p>16位整数，及其算术运算符（short）</p><p>16位字符，及其算术运算符（char）</p><p>8位整数，及其算术运算符（byte）</p><p>32位单精度实数，及其算术运算符（float）</p><h3 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h3><p>声明语句：创建某种类型的变量并用标识符为其命名</p><p>赋值语句：将（右侧表达式产生）某种类型的数值赋给一个单变量（左侧）</p><p>条件语句：简单地改变执行流程（根据指定条件，执行某个代码段）</p><p>循环语句：彻底地改变执行流程（若条件为真，反复执行该代码段）</p><p>调用语句及返回语句：和静态方法有关，是改变执行流程和代码组织的另一种形式</p><h4 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h4><p>数组名表示的是整个数组——如果将一个数组变量赋予另一个变量，那么两个变量将会指向同一个数组。例如以下这段代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">...</span><br><span class="line">a[i] = <span class="number">1234</span>;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span>[] b= a;</span><br><span class="line">...</span><br><span class="line">b[i] = <span class="number">5678</span>; <span class="comment">// a[i]的值也会变成5678</span></span><br></pre></td></tr></table></figure><h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><p>修饰符static将静态方法与实例方法区别开来。</p><p><img src="/image/%E7%9F%A5%E8%AF%86%E7%82%B9/1656564218608.png" alt="1656564218608"></p><h4 id="方法的性质"><a href="#方法的性质" class="headerlink" title="方法的性质"></a>方法的性质</h4><ul><li>参数按值传递</li><li>可被重载</li><li>只能返回一个值，但可以包含多个返回语句</li><li>可以产生副作用（接受输入、产生输出、修改数组、改变系统状态）</li></ul><h4 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h4><ul><li>递归总有一个最简单的实现方法——方法的第一条语句总是一个包含return的条件语句</li><li>递归调用总是去尝试解决一个规模更小的子问题，这样递归才能收敛到最简单的情况。</li><li>递归调用的父问题和尝试解决的子问题之间不应该有交集。</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 此为二分查找的递归实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">rank</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> rank(key, a, <span class="number">0</span>,a.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">rank</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span>[] a, <span class="type">int</span> ls, <span class="type">int</span> re)</span> &#123;</span><br><span class="line">  <span class="comment">// 如果key存在于a[]中，其索引应该位于ls与re之间</span></span><br><span class="line">  <span class="keyword">if</span> (ls &gt; re) &#123; <span class="keyword">return</span> -<span class="number">1</span>; &#125;</span><br><span class="line">  <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> ls + (re - ls) / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span> (key &lt; a[mid]) &#123; <span class="keyword">return</span> rank(key, a, ls, mid - <span class="number">1</span>); &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) &#123; <span class="keyword">return</span> rank(key, a, mid + <span class="number">1</span>, re); &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123; <span class="keyword">return</span> mid; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h4><p>设计开发用例，对库中的所有方法进行测试</p><h4 id="外部库"><a href="#外部库" class="headerlink" title="外部库"></a>外部库</h4><p>系统标准库</p><ul><li>Math</li><li>Integer[*]</li><li>Double[*]</li><li>String[*]</li><li>StringBuilder</li><li>System</li></ul><p>导入的系统库</p><ul><li>java.util.Arrsys</li></ul><p>标准库</p><ul><li>StdIn</li><li>StdOut</li><li>StdDraw</li><li>StdRandom</li><li>StdStats</li><li>In[*]</li><li>Out[*]</li></ul><p>[*] 含有静态方法的数据类型的定义</p><p>使用方法</p><ol><li>先下载这些库的源代码并放入工作目录中</li><li>在程序开头使用import语句导入</li></ol><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>应用程序编程接口：包含库的方法名称、签名、简单描述</p><p>目的：将调用和实现分离</p><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><p>String值和数字之间转换的API</p><table><thead><tr><th>public class Integer</th><th></th></tr></thead><tbody><tr><td>static int parseInt(String s)</td><td>将字符串s转换为整数</td></tr><tr><td>static String toString(int i)</td><td>将整数i转换为字符串</td></tr></tbody></table><table><thead><tr><th>public class Double</th><th></th></tr></thead><tbody><tr><td>static string parseDouble(String s)</td><td>将字符串s转换为浮点数</td></tr><tr><td>static String toString(double x)</td><td>将浮点数x转换为字符串</td></tr></tbody></table><h4 id="完成的二分查找代码段"><a href="#完成的二分查找代码段" class="headerlink" title="完成的二分查找代码段"></a>完成的二分查找代码段</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">rank</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="comment">// 数组必须是有序的</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">ls</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">re</span> <span class="operator">=</span> a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (ls &lt;= re) &#123;</span><br><span class="line">      <span class="comment">// 被查找的键要么不存在，要么比如存在于a[ls..re]之中</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> ls + (re - ls) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">if</span> (key &lt; a[mid]) &#123; re = mid - <span class="number">1</span>; &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) &#123; ls = mid + <span class="number">1</span>; &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123; <span class="keyword">return</span> mid; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] whitelist = In.readInts(args[<span class="number">0</span>]);</span><br><span class="line">    Arrays.sort(whitelist);</span><br><span class="line">    <span class="keyword">while</span> (!StdIn.isEmpty()) &#123;</span><br><span class="line">      <span class="comment">//读取键值，如果不存在于白名单中则将其打印出来</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">key</span> <span class="operator">=</span> StdIn.readInt();</span><br><span class="line">      <span class="keyword">if</span> (rank(key, whitelist) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        StdOut.printIn(key);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="问答"><a href="#问答" class="headerlink" title="问答"></a>问答</h3><p>问：为什么数组的起始索引是0而不是1?<br>答：这个习惯来源于机器语言，那时要计算一个数组元素的地址需要将数组的起始地址加上该元素的索引。将起始索引设为1要么会浪费数组的第一个元素的空间，要么会花费额外的时间来将索引减1。</p><p>问：在Java中，一个静态方法能够将另一个静态方法作为参数吗?<br>答：不行，但问得好，因为有很多语言都能够这么做。</p><h2 id="数据抽象"><a href="#数据抽象" class="headerlink" title="数据抽象"></a>数据抽象</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Java程序的基本结构&quot;&gt;&lt;a href=&quot;#Java程序的基本结构&quot; class=&quot;headerlink&quot; title=&quot;Java程序的基本结构&quot;&gt;&lt;/a&gt;Java程序的基本结构&lt;/h2&gt;&lt;h3 id=&quot;Java程序（类）-x2F-静态方法（函数）库-x2F-数</summary>
      
    
    
    
    <category term="空" scheme="https://superq314.github.io/categories/%E7%A9%BA/"/>
    
    
    <category term="空" scheme="https://superq314.github.io/tags/%E7%A9%BA/"/>
    
  </entry>
  
  <entry>
    <title>标签外挂样式</title>
    <link href="https://superq314.github.io/2022/06/30/Hexo+Butterfly/Butterfly/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/"/>
    <id>https://superq314.github.io/2022/06/30/Hexo+Butterfly/Butterfly/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/</id>
    <published>2022-06-30T02:35:07.622Z</published>
    <updated>2022-06-30T03:01:19.447Z</updated>
    
    <content type="html"><![CDATA[<p>更多细节请移步至 <a href="https://qianchenggit.github.io/2021/02/20/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/">添加Butterfly外挂标签样式</a></p><h2 id="标签外挂"><a href="#标签外挂" class="headerlink" title="标签外挂"></a>标签外挂</h2><h3 id="1-Note语法"><a href="#1-Note语法" class="headerlink" title="1.Note语法"></a>1.Note语法</h3><p> 移植于next主题：可以在 <code>\source\_data</code>中的 <code>butterfly.yml</code>修改：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  # - simple    bs-callout old alert style. Default.</span><br><span class="line">  # - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  # - flat      flat callout style with background, like on Mozilla or</span><br><span class="line">  style: flat</span><br><span class="line">  icons: true        # 是否开启图片</span><br><span class="line">  border_radius: 3</span><br><span class="line">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span><br><span class="line">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span><br><span class="line">  light_bg_offset: 0</span><br></pre></td></tr></table></figure><p> 该标签有 <code>两种</code> 使用方法。</p><p> <code>默认模板</code> ：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>名称</th><th>用法</th></tr></thead><tbody><tr><td>class</td><td>【可选】标识，不同的标识有不同的配色（ default &#x2F; primary &#x2F; success &#x2F; info &#x2F; warning &#x2F; danger ）</td></tr><tr><td>no-icon</td><td>【可选】不显示 icon</td></tr><tr><td>style</td><td>【可选】可以覆盖配置中的 style（simple&#x2F;modern&#x2F;flat&#x2F;disabled）</td></tr></tbody></table><p>一、simple</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默认 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示块</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p><strong>更多可以在我的<a href="https://moyu-zc.gitee.io/">个人博客</a>观看</strong></p><h4 id="2-图片放置"><a href="#2-图片放置" class="headerlink" title="2.图片放置"></a>2.图片放置</h4><p>可以根据 <code>图片长度</code>自行排列</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 图片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p><code>例如</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![img](https://upimage.alexhchu.com/2020/10/21/f5ac68ddaaf64.jpg)</span><br><span class="line">![](https://upimage.alexhchu.com/2020/10/21/0d1b78c7157d4.jpg)</span><br><span class="line">![](https://upimage.alexhchu.com/2020/10/19/34446d0d37dde.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p><strong>因为这个功能是用在Hexo美化中，在此博客效果不显示，具体可移步我的博客（最下方链接）</strong></p><h4 id="3-tag-hide"><a href="#3-tag-hide" class="headerlink" title="3.tag-hide"></a>3.tag-hide</h4><p>这个可以提供一个 <code>按钮</code>，点击它，显示你隐藏的 <code>文字</code>、<code>图片</code>等。</p><blockquote><p>Inline</p></blockquote><p>这个可以隐藏 <code>文字</code>，仅限于此。( content不能包含英文逗號，可用 <code>&amp;sbquo;</code>)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本內容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><p>Demo</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">座右铭座右铭！！ &#123;% hideInline 何其荣幸 何德何能,别点我,#FF7242,#fff %&#125;</span><br><span class="line">平平无奇。。。  &#123;% hideInline 上面太花里胡哨了,上面真秀 %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Block<br>这个也是提供一个 <code>按钮</code>，而他可以隐藏 <code>文字</code>、<code>图片</code>、<code>代码块</code>等。( dispaly不能包含英文逗號，可用 <code>&amp;sbquo;</code>)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本內容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><p>Demo</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">座右铭座右铭！！</span><br><span class="line">&#123;% hideBlock  别点我,#FF7242,#fff %&#125;</span><br><span class="line">何其荣幸 何德何能</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br><span class="line">平平无奇。。。</span><br><span class="line">&#123;% hideBlock 上面真秀 %&#125;</span><br><span class="line"> 上面太花里胡哨了</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Toggle<br>如果你需要展示的 <code>內容太多</code>，可以把它 <code>隐藏</code>在收缩框里，需要时再把它 <code>展开</code>。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><p>Demo</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle Wecome to my Blog %&#125;</span><br><span class="line"> 欢迎欢迎欢迎</span><br><span class="line"> MoYu‘s Blog</span><br><span class="line"> Gitee：https://moyu-zc.gitee.io/</span><br><span class="line"> Github：https://moyu-zc.github.io/</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><p><strong>因为这个功能是用在Hexo美化中，在此博客效果不显示，具体可移步我的博客（最下方链接）</strong></p><h4 id="4-mermaid"><a href="#4-mermaid" class="headerlink" title="4.mermaid"></a>4.mermaid</h4><p>mermaid标签不允许嵌套于一些隐藏属性的标签外挂</p><p>例如: tag-hide內的标签外挂和tabs标签外挂，也不能压缩代码</p><p>这会导致mermaid图示无法正常显示，使用时请留意。</p><p>使用mermaid标签可以绘制 <code>Flowchart（流程图）</code>、<code>Sequence diagram（时序图 ）</code>、<code>Class Diagram（类别图）</code>、<code>State Diagram（状态图）</code>、<code>Gantt（甘特图）</code>和 <code>Pie Chart（圆形图）</code>，具体可以查看<a href="https://mermaid-js.github.io/mermaid/#/">mermaid文檔</a><br>在 <code>\source\_data</code>中的 <code>butterfly.yml</code>中修改:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mermaid:</span><br><span class="line">  enable: true</span><br><span class="line">  # built-in themes: default/forest/dark/neutral</span><br><span class="line">  theme: default</span><br></pre></td></tr></table></figure><p><code>写法</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">內容</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><p>Demo</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">pie</span><br><span class="line">   Test X</span><br><span class="line">    &quot;A&quot; : 50</span><br><span class="line">    &quot;B&quot; : 20</span><br><span class="line">    &quot;C&quot; : 10</span><br><span class="line">    &quot;D&quot; :  5</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><p><strong>因为这个功能是用在Hexo美化中，在此博客效果不显示，具体可移步我的博客（最下方链接）</strong></p><h4 id="5-Tabs"><a href="#5-Tabs" class="headerlink" title="5.Tabs"></a>5.Tabs</h4><p>Demo1——<code>默认</code>方式</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>Demo2——预设选择&#96;&#96;tabs&#96;</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>Demo3——没有预设</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>Demo4——自定义Tab名、 只有icon、icon和Tab名</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一個Tab --&gt;</span><br><span class="line">**tab名字为第一个Tab**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab @fab fa-bell --&gt;</span><br><span class="line">**只有图标 没有Tab名字**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab 身份证@fas fa-address-card --&gt;</span><br><span class="line">**名字+icon**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><strong>因为这个功能是用在Hexo美化中，在此博客效果不显示，具体可移步我的博客（最下方链接）</strong></p><h4 id="6-Button"><a href="#6-Button" class="headerlink" title="6.Button"></a>6.Button</h4><p><code>模板</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line">[url]         : 链接</span><br><span class="line">[text]        : 按钮文字</span><br><span class="line">[icon]        : [可选] 图标</span><br><span class="line">[color]       : [可选] 按钮背景颜色(默认style时）</span><br><span class="line">                      按鈕字體和邊框顔色(outline時)</span><br><span class="line">                      default/blue/pink/red/purple/orange/green</span><br><span class="line">[style]       : [可选] 按钮样式 默认实心</span><br><span class="line">                      outline/留空</span><br><span class="line">[layout]      : [可选] 按钮布局 默认为line</span><br><span class="line">                      block/留空</span><br><span class="line">[position]    : [可选] 按钮位置 前提是设置了layout為block 默认为左边</span><br><span class="line">                      center/right/留空</span><br><span class="line">[size]        : [可选] 按钮大小</span><br><span class="line">                      larger/留空</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,block %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,block right outline larger %&#125;</span><br></pre></td></tr></table></figure><p><code>More styles</code>:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://moyu-zc.gitee.io/&#x27;,MoYu,far fa-hand-point-right,outline green larger %&#125;</span><br></pre></td></tr></table></figure><p><strong>因为这个功能是用在Hexo美化中，在此博客效果不显示，具体可移步我的博客（最下方链接）</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;更多细节请移步至 &lt;a href=&quot;https://qianchenggit.github.io/2021/02/20/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/&quot;&gt;添加Butterfly外挂标签样式&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;标签外挂</summary>
      
    
    
    
    <category term="Hexo" scheme="https://superq314.github.io/categories/Hexo/"/>
    
    <category term="Butterfly" scheme="https://superq314.github.io/categories/Hexo/Butterfly/"/>
    
    
    <category term="Butterfly" scheme="https://superq314.github.io/tags/Butterfly/"/>
    
  </entry>
  
  <entry>
    <title>Butterfly主题文件优化</title>
    <link href="https://superq314.github.io/2022/06/30/Hexo+Butterfly/Butterfly/BUtterfly%E4%B8%BB%E9%A2%98%E6%96%87%E4%BB%B6%E4%BC%98%E5%8C%96/"/>
    <id>https://superq314.github.io/2022/06/30/Hexo+Butterfly/Butterfly/BUtterfly%E4%B8%BB%E9%A2%98%E6%96%87%E4%BB%B6%E4%BC%98%E5%8C%96/</id>
    <published>2022-06-30T02:08:46.644Z</published>
    <updated>2022-06-30T02:30:25.085Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Butterfly主题文件优化"><a href="#Butterfly主题文件优化" class="headerlink" title="Butterfly主题文件优化"></a>Butterfly主题文件优化</h2><h3 id="添加404页面"><a href="#添加404页面" class="headerlink" title="添加404页面"></a>添加404页面</h3><p>1.找到自己心仪的404页面，这个网站很多很多呦。</p><p><strong><a href="https://404.life/">https://404.life/</a></strong></p><p>2.在 <code>\source</code>中创建一个 <code>404文件夹</code>和一个 <code>404.html</code></p><p>3.修改 <code>404.html</code>内容</p><p> <code>红线</code>的地方，可以自行选择是否修改</p><p> <code>红框</code>的地方，必须修改 (可以按照图片中修改)</p><p>4.设置404跳过渲染，在主目录 <code>_config.yml</code>中：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render:</span><br><span class="line">  - 404.html</span><br></pre></td></tr></table></figure><p>5.<code>butterfly.yml</code> 可以关掉默认的404页面</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># A simple 404 page</span><br><span class="line">error_404:</span><br><span class="line">  enable: false  # 关闭</span><br><span class="line">  subtitle: &#x27;Page Not Found&#x27;</span><br><span class="line">  background: https://i.loli.net/2020/05/19/aKOcLiyPl2JQdFD.png</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改滚动条"><a href="#修改滚动条" class="headerlink" title="修改滚动条"></a>修改滚动条</h3><p>1.创建一个css文件移动到 <code>\themes\butterfly\source\css</code>目录下。</p><p>2.引入方式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># inject</span></span><br><span class="line"><span class="comment"># insert the code to head (before &#x27;`&lt;/head&gt;`&#x27; tag) and the bottom (before &#x27;`&lt;/body&gt;` tag&#x27;)</span></span><br><span class="line"><span class="string">插入代码到头部</span> <span class="string">`&lt;/head&gt;`之前和底部</span> <span class="string">`&lt;/body&gt;`之前</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/mycss.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment">#- &lt;script src=&quot;×××&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>将以下代码复制到你所创建的 <code>css文件</code>,引入即可。</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">/*</span> <span class="string">滚动条</span> <span class="string">*/</span></span><br><span class="line"><span class="string">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attr">width:</span> <span class="string">8px;</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">8px;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">::-webkit-scrollbar-track</span> &#123;</span><br><span class="line">  <span class="attr">background-color:</span> <span class="string">rgba(73</span>, <span class="number">177</span>, <span class="number">245</span>, <span class="number">0.2</span><span class="string">);</span></span><br><span class="line">  <span class="attr">border-radius:</span> <span class="string">2em;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attr">background-color:</span> <span class="comment">#49b1f5;</span></span><br><span class="line">  <span class="attr">background-image:</span> <span class="string">-webkit-linear-gradient(</span></span><br><span class="line">    <span class="string">45deg</span>,</span><br><span class="line">    <span class="string">rgba(255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span><span class="string">)</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">transparent</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">transparent</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">rgba(255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span><span class="string">)</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">rgba(255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span><span class="string">)</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">transparent</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">    <span class="string">transparent</span></span><br><span class="line">  <span class="string">);</span></span><br><span class="line">  <span class="attr">border-radius:</span> <span class="string">2em;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">::-webkit-scrollbar-corner</span> &#123;</span><br><span class="line">  <span class="attr">background-color:</span> <span class="string">transparent;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">::-moz-selection</span> &#123;</span><br><span class="line">  <span class="attr">color:</span> <span class="comment">#fff;</span></span><br><span class="line">  <span class="attr">background-color:</span> <span class="comment">#49b1f5;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="页脚渐变"><a href="#页脚渐变" class="headerlink" title="页脚渐变"></a>页脚渐变</h3><p>将以下代码复制到你所创建的 <code>css文件</code>,引入即可。</p><p>可参考：<code>修改滚动条</code>部分中的 <code>引入方式</code></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">/*</span> <span class="string">页脚footer</span> <span class="string">*/</span></span><br><span class="line"><span class="string">/*</span> <span class="string">渐变色滚动动画</span> <span class="string">*/</span></span><br><span class="line"><span class="string">@-webkit-keyframes</span> <span class="string">Gradient</span> &#123;</span><br><span class="line">    <span class="number">0</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">100</span><span class="string">%</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">@-moz-keyframes</span> <span class="string">Gradient</span> &#123;</span><br><span class="line">    <span class="number">0</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">100</span><span class="string">%</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">@keyframes</span> <span class="string">Gradient</span> &#123;</span><br><span class="line">    <span class="number">0</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">100</span><span class="string">%</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-position:</span> <span class="number">0</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#footer &#123;</span></span><br><span class="line">    <span class="attr">background:</span> <span class="string">linear-gradient(-45deg,</span> <span class="comment">#ee7752, #ce3e75, #23a6d5, #23d5ab);</span></span><br><span class="line">    <span class="attr">background-size:</span> <span class="number">400</span><span class="string">%</span> <span class="number">400</span><span class="string">%;</span></span><br><span class="line">    <span class="string">-webkit-animation:</span> <span class="string">Gradient</span> <span class="string">10s</span> <span class="string">ease</span> <span class="string">infinite;</span></span><br><span class="line">    <span class="string">-moz-animation:</span> <span class="string">Gradient</span> <span class="string">10s</span> <span class="string">ease</span> <span class="string">infinite;</span></span><br><span class="line">    <span class="attr">animation:</span> <span class="string">Gradient</span> <span class="string">10s</span> <span class="string">ease</span> <span class="string">infinite;</span></span><br><span class="line">    <span class="string">-o-user-select:</span> <span class="string">none;</span></span><br><span class="line">    <span class="string">-ms-user-select:</span> <span class="string">none;</span></span><br><span class="line">    <span class="string">-webkit-user-select:</span> <span class="string">none;</span></span><br><span class="line">    <span class="string">-moz-user-select:</span> <span class="string">none;</span></span><br><span class="line">    <span class="attr">user-select:</span> <span class="string">none;</span></span><br><span class="line">    <span class="attr">border-top-left-radius:</span> <span class="string">10px;</span></span><br><span class="line">    <span class="attr">border-top-right-radius:</span> <span class="string">10px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#footer:before &#123;</span></span><br><span class="line">    <span class="attr">background-color:</span> <span class="string">rgba(0,</span> <span class="number">0</span><span class="string">,</span> <span class="number">0</span><span class="string">,</span> <span class="number">0</span><span class="string">);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="更换背景及透明度"><a href="#更换背景及透明度" class="headerlink" title="更换背景及透明度"></a>更换背景及透明度</h3><h4 id="1-透明度"><a href="#1-透明度" class="headerlink" title="1.透明度"></a>1.透明度</h4><p>将以下代码复制到你所创建的 <code>css文件</code>,引入即可。</p><p>可参考：<code>修改滚动条</code>部分中的 <code>引入方式</code></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">/*</span> <span class="string">文章页背景</span> <span class="string">*/</span></span><br><span class="line"><span class="string">.layout_post&gt;#post</span> &#123;</span><br><span class="line">    <span class="string">/*</span> <span class="string">以下代表白色透明度为0.3</span> <span class="string">*/</span></span><br><span class="line">    <span class="attr">background:</span> <span class="string">rgba(255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">.3</span><span class="string">);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">/*</span> <span class="string">所有背景（包括首页卡片、文章页、页面页等）</span> <span class="string">/</span></span><br><span class="line"><span class="comment">#aside_content .card-widget, #recent-posts&gt;.recent-post-item, .layout_page&gt;div:first-child:not(.recent-posts), .layout_post&gt;#page, .layout_post&gt;#post, .read-mode .layout_post&gt;#post&#123;</span></span><br><span class="line">    <span class="string">/</span> <span class="string">以下代表白色透明度为0.3</span> <span class="string">*/</span></span><br><span class="line">    <span class="attr">background:</span> <span class="string">rgba(255,255,255,.3);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="2-更换背景"><a href="#2-更换背景" class="headerlink" title="2.更换背景"></a>2.更换背景</h4><p>老规矩，复制到你所创建的 <code>css文件</code>,引入即可。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#web_bg &#123;</span><br><span class="line">  background-image: linear-gradient(to top, #fff1eb 0%, #ace0f9 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然这是我的博客 <code>背景</code>。</p><p>如果你想更改，具体可以参考本博客文章：Hexo之更换背景及透明度</p><h3 id="移动端优化"><a href="#移动端优化" class="headerlink" title="移动端优化"></a>移动端优化</h3><p><code>\themes\butterfly\source\css\_third-party\normalize.min.css</code>添加如下css代码：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* 移动端优化：去除归档、标签、最新文章、公告、、只保留网站统计 */</span><br><span class="line">@media screen and (max-width: 800px) &#123;</span><br><span class="line">    #aside_content</span><br><span class="line">    div:not(:last-child) &#123;</span><br><span class="line">        display: none;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Butterfly主题文件优化&quot;&gt;&lt;a href=&quot;#Butterfly主题文件优化&quot; class=&quot;headerlink&quot; title=&quot;Butterfly主题文件优化&quot;&gt;&lt;/a&gt;Butterfly主题文件优化&lt;/h2&gt;&lt;h3 id=&quot;添加404页面&quot;&gt;&lt;a h</summary>
      
    
    
    
    <category term="Hexo" scheme="https://superq314.github.io/categories/Hexo/"/>
    
    <category term="Butterfly" scheme="https://superq314.github.io/categories/Hexo/Butterfly/"/>
    
    
    <category term="Butterfly" scheme="https://superq314.github.io/tags/Butterfly/"/>
    
  </entry>
  
  <entry>
    <title>添加图标</title>
    <link href="https://superq314.github.io/2022/06/29/Hexo+Butterfly/Hexo/%E5%9C%A8hexo%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8F%92%E5%9B%BE/"/>
    <id>https://superq314.github.io/2022/06/29/Hexo+Butterfly/Hexo/%E5%9C%A8hexo%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8F%92%E5%9B%BE/</id>
    <published>2022-06-29T14:42:56.553Z</published>
    <updated>2022-06-29T14:45:11.945Z</updated>
    
    <content type="html"><![CDATA[<h2 id="如何在-Hexo-中使用插图"><a href="#如何在-Hexo-中使用插图" class="headerlink" title="如何在 Hexo 中使用插图"></a>如何在 Hexo 中使用插图</h2><p>我们编辑文章时或有或无的需要佐上那么几张图片来表达自己的想法, Hexo 中编辑文章的方式是直接写 Markdown 文件, 又没有直接上传图片的接口, 以下是博主从网上收集来的一些 Hexo 中引用图片的办法合集.</p><h3 id="办法1-直接使用-Markdown-提供的引用方法"><a href="#办法1-直接使用-Markdown-提供的引用方法" class="headerlink" title="办法1 直接使用 Markdown 提供的引用方法"></a>办法1 直接使用 Markdown 提供的引用方法</h3><p>在 <code>./source/images/</code> 目录下放置图片, 在 Markdown 中这样写</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img /images/example.png example %&#125;</span><br></pre></td></tr></table></figure><p>这种方法很方便, 配合 livereload 或 browsersync 插件无论是在本地还是在线上都能看到效果, 但是如果您是用的 Markdown 编辑器, 这似乎就有些难受了, 因为在 Markdown 编辑器中是无法识别这样的图片路径的.</p><p>所以对图片的支持程度较差, 您放在 source_dir 下的图片引用后不会正确的显示在本地调试环境或线上, 二者只能取其一, 感觉很难受.</p><h3 id="办法2-使用在线图片存储服务"><a href="#办法2-使用在线图片存储服务" class="headerlink" title="办法2 使用在线图片存储服务."></a>办法2 使用在线图片存储服务.</h3><p>引用图片时, 将图片先上传到一个另外的服务器上, 得到该图片的在线地址, 然后在 Markdown 中引用.</p><p>国内外用户&#x2F;服务商有很多提供类似图床或对象存储的服务, 即外链.</p><ul><li><a href="http://pic.gimhoy.com/">Gimhoy图床</a></li><li><a href="http://yotuku.cn/">极简图床</a></li><li><a href="http://www.qiniu.com/">七牛</a></li><li><del><a href="http://weibotuchuang.sinaapp.com/bookmark.html">微博是个好图床</a> ( 2016.12.16 已挂 )</del></li></ul><p>这些在线图片存储服务使用便捷, 还自带 CDN 加速功能, 但缺点也很明显了, 图片存在别人服务器里面说不定哪天图就挂了, 总觉得不太放心.</p><h3 id="办法3-使用-Hexo-asset-image-插件"><a href="#办法3-使用-Hexo-asset-image-插件" class="headerlink" title="办法3 使用 Hexo-asset-image 插件"></a>办法3 使用 Hexo-asset-image 插件</h3><p><strong>2017年4月1日 在这个插件更新前 (当前版本 v0.0.3) , 不推荐使用这个插件. 原因是使用该插件后导致编译出的 html 文件中文字符会被转化为 unicode 编码, 不利于站内搜索和 SEO 优化. 你可以直接跳到办法4</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><p><em>非官方插件, 该插件由 CodeFalling 维护, 底部有项目地址</em></p><p>安装该插件后在您项目根目录的 <code>./_config.yml</code> 中寻找到下面这一行, 将 <code>post_asset_folder</code> 的值设置为 <code>true</code>.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>该设置会在您使用 <code>hexo new &quot;new post&quot;</code> 时在文章所在目录下生成一个同名文件夹, 您只需将图片放入该文件夹, 然后在需要放置图片的位置写入以下代码即可解决 办法1 出现的问题.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img example.png example %&#125;</span><br></pre></td></tr></table></figure><h3 id="办法4-使用官方提供的办法"><a href="#办法4-使用官方提供的办法" class="headerlink" title="办法4 使用官方提供的办法"></a>办法4 使用官方提供的办法</h3><p>2017年4月1日更新</p><p>该方法类似办法3, 只是使用图片的方法由原生的 <code>![]()</code> 改为 Hexo 标签插件.</p><p>首先在您项目根目录的 <code>./_config.yml</code> 中寻找到下面这一行, 将 <code>post_asset_folder</code> 的值设置为 <code>true</code>. 原因办法3中已经介绍, 这里不再阐述.</p><p>然后在需要引用图片的地方写入以下代码即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img example.jpg this is title %&#125;</span><br></pre></td></tr></table></figure><p>如果你之前使用了 <code>hexo-asset-image</code> 插件的办法, 你可以使用我写的正则表达式一键替换.</p><p>查找</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">!\[([\S ]+)\]\((\S+)\)</span><br></pre></td></tr></table></figure><p>替换为</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img $2 $1 %&#125;</span><br></pre></td></tr></table></figure><p>配合我的另一篇文章 <a href="https://blog.mutoe.com/2016/hexo-post-livereload-edit/">实时预览</a> , 写文章简直美滋滋.</p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>三种解决办法各有优劣, 博主做个简单的小结.</p><table><thead><tr><th>-</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>1 直接使用 Markdown 引用方法</td><td>图片资源统一存放, 便于管理</td><td>实时预览时排版效果不好</td></tr><tr><td>2 使用在线图片存储服务</td><td>方便移植, 不占用本地空间</td><td>使用不稳定, 不便于管理</td></tr><tr><td>3 使用 Hexo-asset-image 插件</td><td>文件结构更有条理</td><td>对中文支持不友好</td></tr><tr><td>4 使用官方提供的办法</td><td>官方支持</td><td>不适用原生 md 语法</td></tr></tbody></table><p>您可以根据自己的实际情况来进行选择, 不能说哪个办法是最好的, 但肯定有一个最适合您的.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;如何在-Hexo-中使用插图&quot;&gt;&lt;a href=&quot;#如何在-Hexo-中使用插图&quot; class=&quot;headerlink&quot; title=&quot;如何在 Hexo 中使用插图&quot;&gt;&lt;/a&gt;如何在 Hexo 中使用插图&lt;/h2&gt;&lt;p&gt;我们编辑文章时或有或无的需要佐上那么几张图片</summary>
      
    
    
    
    <category term="Hexo" scheme="https://superq314.github.io/categories/Hexo/"/>
    
    
    <category term="icon" scheme="https://superq314.github.io/tags/icon/"/>
    
    <category term="iconfont" scheme="https://superq314.github.io/tags/iconfont/"/>
    
  </entry>
  
  <entry>
    <title>markdown使用方法</title>
    <link href="https://superq314.github.io/2022/06/29/%E6%9D%82%E7%B1%BB/markdown%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://superq314.github.io/2022/06/29/%E6%9D%82%E7%B1%BB/markdown%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</id>
    <published>2022-06-29T14:36:41.742Z</published>
    <updated>2022-06-29T15:29:21.200Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Markdown语法"><a href="#Markdown语法" class="headerlink" title="Markdown语法"></a>Markdown语法</h2><p><code>Markdown</code> 语法差异比较多，不过常用的语法基本上在各个编辑器的快捷指令中都包含了，所以不用担心，下面我介绍一些常用的语法：<br>标题：利用 <code>#</code> 符号可以设定标题，1个表示一级标题，2个表示二级标题，如此类推；<br>引用：利用 <code>&gt;</code> 可以创建引用块；<br>代码：利用左上角 <strong><code>** 将待显示内容包起来即可； 代码块：利用3个 **</code></strong> 描述即可创建代码块；<br>斜体：利用 <code>ctrl + I</code> 即可实现斜体；<br>加粗：利用 <code>ctrl + B</code> 即可实现粗体；<br>线状：水平分割线可以用 <code>---</code> 或者 <code>***</code> 实现，下划线可以用 <code>ctrl + U</code> 实现，删除线可利用 <code>~~</code> 包裹实现；<br>列表：无序列表用 <code>-</code> ，有序列表用数字 <code>+.</code> 。<br>以上可以看上面介绍 <code>MarkdownPad2</code> 的图效果，对于图片、公式、表格、流程图等特殊元素，我会在下面具体介绍。</p><h2 id="图片及链接编排"><a href="#图片及链接编排" class="headerlink" title="图片及链接编排"></a>图片及链接编排</h2><p>图片实际上是一种超链接，所以链接的种类可以分为跳转链接、图片链接两种，具体如下：</p><h3 id="1-跳转链接"><a href="#1-跳转链接" class="headerlink" title="1 跳转链接"></a>1 跳转链接</h3><p>跳转链接分为两种：站外跳转和站内跳转：<br>站外跳转：这种方式很简单，利用下面的方式即可实现点击跳转：<br><a href="%E9%93%BE%E6%8E%A5">说明</a><br>站内跳转：这种方式适用于目录跳转或者引用跳转，这个要用 <code>html</code> 语法，不过我试验了多次都不成功?</p><h3 id="2-图片编辑与排版"><a href="#2-图片编辑与排版" class="headerlink" title="2 图片编辑与排版"></a>2 图片编辑与排版</h3><p>图片的超链接创建方式有三种：<br>Markdown语法实现：<img src="/%E9%93%BE%E6%8E%A5"><br>拖入&#x2F;粘贴实现：将剪切板或者本地图片拖入 <code>Typora</code> 可以自动生成 <code>Mardown</code> 语句，链接会自动显示为文件本地位置，也可以在设置里面设置默认存放位置，以及绝对路径or相对路径。<br>利用 <code>ctrl + shitf + I</code> 或者工具栏-插入图片可以点击插入本地图片。<br>除此之外，<code>Typora</code> 的自动创建图片链接的方式可以让图片自动居中，如果我们需要让图片居中或者放缩，则需要用到下面的语法：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div align=center&gt;&lt;img src = &quot;图片链接&quot; height =xxx width = xxx /&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="3-图片存储"><a href="#3-图片存储" class="headerlink" title="3 图片存储"></a>3 图片存储</h3><p>无论是 <code>GitPages</code> 、<code>CodingPages</code> 还是云服务器，其提供的免费存储空间都是有上限的，所以我不建议在写博客的时候使用相对路径存储图片，然后上传，这种方式仅针对文字为主的博主。这种方式一般采用图片链接为相对路径并且在 <code>_post</code> 目录下新建一个存放图片的目录，并命名为博客名即可。下面我主要讲利用云服务器对象存储功能实现的图床。</p><h4 id="3-1-七牛云"><a href="#3-1-七牛云" class="headerlink" title="3.1 七牛云"></a>3.1 七牛云</h4><h4 id="3-2-阿里云"><a href="#3-2-阿里云" class="headerlink" title="3.2 阿里云"></a>3.2 阿里云</h4><h4 id="3-3-腾讯云"><a href="#3-3-腾讯云" class="headerlink" title="3.3 腾讯云"></a>3.3 腾讯云</h4><h2 id="公式编排"><a href="#公式编排" class="headerlink" title="公式编排"></a>公式编排</h2><p>公式编排所利用的是 <code>Latex</code> 语法，这一点 <code>Typora</code> 已经集成了，除此之外我们在上传 <code>Hexo</code> 的时候需要开启 <code>mathjax</code> 或者 <code>katex</code> 选项。具体内容如下：</p><h3 id="1-Latex公式编辑"><a href="#1-Latex公式编辑" class="headerlink" title="1 Latex公式编辑"></a>1 Latex公式编辑</h3><p><code>Latex</code> 公式编辑主要依赖 <code>Latex</code> 语法，在 <code>Markdown</code> 中需要利用 <code>$</code> 包裹实现行内公式编辑，或者 <code>$$</code> 包裹实现行间公式编辑，具体的 <code>Latex</code> 语法可能对于普通玩家来说比较麻烦，不过有以下几种便捷方式：<br>eqneditor：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548164999775.png" alt="1548164999775"><br>sciweavers：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548165578915.png" alt="1548165578915"><br>hostmath：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548165688021.png" alt="1548165688021"><br>Mathtype：<br>平时敲公式都使用的 <code>Mathtype</code> ，所以就像能不能把公式直接转换为 <code>Latex</code> 语句，事实证明可以：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548165974780.png" alt="1548165974780"><br>在 <code>mathtype-preferences</code> 中设置如上的格式，然后复制公式到任意地方，即可自动转为 <code>latex</code> 语句，只需要将首尾字符替换为 <code>$</code> 或者 <code>$$</code> 即可，是不是很简单~</p><h3 id="2-Hexo的Latex渲染支持"><a href="#2-Hexo的Latex渲染支持" class="headerlink" title="2 Hexo的Latex渲染支持"></a>2 Hexo的Latex渲染支持</h3><p>虽然我们的 <code>Markdown</code> 编辑器支持了 <code>Latex</code> 语法，但是 <code>Hexo</code> 还没支持，所以需要在其中开启相关开关，我是用的是 <code>Next6</code> 主题，其中自带了相关接口，主题相关内容我后面会单独开博客介绍。</p><h2 id="表格和流程图编排"><a href="#表格和流程图编排" class="headerlink" title="表格和流程图编排"></a>表格和流程图编排</h2><h3 id="1-表格"><a href="#1-表格" class="headerlink" title="1 表格"></a>1 表格</h3><p>我们先看下一个例子：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">| Tables   |      Are      |  Cool |</span><br><span class="line">| ------   | :-----------: | ----: |</span><br><span class="line">| col 1 is | left-aligned  | $1600 |</span><br><span class="line">| col 2 is |   centered    |   $12 |</span><br><span class="line">| col 3 is | right-aligned |    $1 |</span><br></pre></td></tr></table></figure><p>上例中<br>——表示左对齐；<br>:——：表示居中；<br>—–:表示右对齐；<br>效果如下：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548169846840.png" alt="1548169846840"><br>不过每次这么敲太麻烦了，还好 <code>Typora</code> 提供了表格工具：<code>ctrl + T</code> 或者段落-表格：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548170038108.png" alt="1548170038108"><br>这样就跟 <code>word</code> 一样了，不过缺点在于，我们很难创建复杂表格，虽然 <code>excel</code> 支持转 <code>html</code> 的功能，不过 <code>bug</code> 多多~</p><h3 id="2-流程图"><a href="#2-流程图" class="headerlink" title="2 流程图"></a>2 流程图</h3><p>流程图我一般都用 <code>visio</code> 画，因为功能强大，不过呢如果用 <code>visio</code> 的话，就只能用截图显示了，那就避免不了背景冲突，如果不在意可以用。这里我要说的是在 <code>markdown</code> 里面写流程图，流程图的创建逻辑无非就是前后的逻辑流，所以可以根据各个对象之间的逻辑进行绘制。<code>Typora</code> 本身支持流程图、时序图、甘特图等，可利用创建代码块的方式创建。其中 <code>flow</code> 支持流程图：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548170834971.png" alt="1548170834971"><br>而 <code>mermaid</code> 既支持流程图，又支持时序图和甘特图：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548171331991.png" alt="1548171331991"><br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548171299774.png" alt="1548171299774"><br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548171270900.png" alt="1548171270900">是不是很厉害，不过呢，要想在 <code>hexo</code> 中支持这些功能，还需要下载安装一些插件才行，后续博客我会介绍。</p><h2 id="内容导航"><a href="#内容导航" class="headerlink" title="内容导航"></a>内容导航</h2><p>有了以上的内容之后，我们怎么设置内容导航，更方便自己和读者了解文章呢：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548171507572.png" alt="1548171507572"><br>对此我们就需要设置分类、标签以及目录。</p><h3 id="1-Pages导航"><a href="#1-Pages导航" class="headerlink" title="1 Pages导航"></a>1 Pages导航</h3><p>在 <code>hexo</code> 中，首页是默认开启的，而关于，标签，分类，归档这些都是需要自己创建和设置的。对于这些页面，我们需要完成以下步骤：</p><ul><li>step1 修改 <code>scaffolds</code> 中的 <code>page</code> 样板：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">type: &#123;&#123;title&#125;&#125;</span><br><span class="line">comments: false</span><br></pre></td></tr></table></figure><p>其中，<code>title</code> 表示默认的标题，即关于，标签，分类，归档，其 <code>type</code> 也是相应的，<code>date</code> 会自动获取当前时间,而 <code>comments</code> 设置为 <code>false</code> 的原因是，这些界面不需要评论窗口。</p><ul><li>step2 创建 <code>pages</code> :</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br><span class="line">hexo new page about</span><br><span class="line">hexo new page archives</span><br></pre></td></tr></table></figure><p>注意拼写！</p><ul><li>Step3 <code>hexo</code> 配置：<br>在 <code>hexo</code> 的主题配置文件中设置 <code>menu</code> 参数：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  about: /about/ || user</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  archives: /archives/ || archive</span><br></pre></td></tr></table></figure><p>这样我们的博客就有了上述页面</p><ul><li>Step4 设置博客标签，<code>hexo</code> 的配置语言支持 <code>yaml</code> 格式，所以下面的方式可以设置多个标签：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tags:</span><br><span class="line">- Markdown</span><br><span class="line">- 对象存储</span><br></pre></td></tr></table></figure><p>设置博客分类：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">- 软件安装与使用</span><br><span class="line">- Hexo</span><br></pre></td></tr></table></figure><p>分类与标签有所不同，上面这种方式表示二级分类，并不是并行的！另外一定要注意-后面有空格！<br>最后我们的博客分类和标签页面都能找到相应的博客，各自博客上也会显示其分类和标签~<br>Step5 简介就是 <code>about</code> 页面，这个页面就是用来写我们的个人简介的，所以可以直接在 <code>blog/source/about/index.md</code> 中直接按照写博客的方式书写我们的简介。</p><h2 id="2-目录"><a href="#2-目录" class="headerlink" title="2 目录"></a>2 目录</h2><p>博客的目录有两种生成方式，一种是博客自带的目录，可以利用 <code>html</code> 语法写，不过 <code>Typora</code> 自带目录生成，可利用[toc]或者段落-内容目录自动生成目录，并支持跳转，不过这种方式 <code>Markdown</code> 本身不兼容，所以需要下载安装一些配置,还需要修改一些配置：<br><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548172658285.png" alt="1548172658285"><br>如果不想折腾的话，<code>hexo</code> 的一些主题已经自带了目录功能，以我使用的 <code>Next6</code> 主题为例：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line"># Automatically add list number to toc.  </span><br><span class="line">number: false</span><br><span class="line"># If true, all words will placed on next lines if header width longer then sidebar width.  </span><br><span class="line">wrap: false</span><br><span class="line"># Maximum heading depth of generated toc. You can set it in one post through toc_max_depth var.  </span><br><span class="line">max_depth: 6</span><br></pre></td></tr></table></figure><ul><li><code>enable</code> 表示是否开启目录生成，如果开启的话，会自动检测我们 <code>Markdown</code> 中的标题;</li><li><code>number</code> 表示是否自动加入标题序号，按照1,1.1,1.1.1等进行标注；</li><li><code>warp</code> 表示如果标题过长的话，是否允许标题换行；</li><li><code>max_Depth</code> 表示允许的最大标题等级。</li><li><img src="https://blogdata-1258545379.cos.ap-shanghai.myqcloud.com/20190122/1548172973805.png" alt="1548172973805"></li></ul><h2 id="pdf编辑"><a href="#pdf编辑" class="headerlink" title="pdf编辑"></a>pdf编辑</h2><p>如果我们想在 <code>word</code> 上编辑，然后放到博客上，可以先利用 <code>word</code> 另存为 <code>pdf</code> ，然后利用 <code>pdf</code> 插件实现。这一点在我所使用的 <code>Next6</code> 主题中采用了，具体如下：</p><ul><li>step1 安装 <code>pdf</code> 插件<br>进入我们博客的主题目录，如 <code>blog/themes/next6</code> ，执行：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/theme-next/theme-next-pdf source/lib/pdf</span><br></pre></td></tr></table></figure><p>或者在 <code>blog/</code> 目录下执行：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-pdf --save</span><br></pre></td></tr></table></figure><p>上面第一种是 <code>next</code> 官方支持的，后者是最常用的。</p><ul><li>step2 <code>hexo</code> 配置（如果采用第一种安装方式）</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pdf:</span><br><span class="line">  enable: true</span><br><span class="line">  per_page: true</span><br><span class="line">  height: 500px</span><br><span class="line">  pdfobject:</span><br><span class="line">    cdn: //cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js</span><br></pre></td></tr></table></figure><ul><li>step3 存放 <code>pdf</code><br>存放 <code>pdf</code> 的方式跟图片一模一样，具体我就不说了</li><li>step4 插入 <code>pdf</code><br>官方支持的方式是：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[](pdf链接)</span><br></pre></td></tr></table></figure><p>而采用方法二的使用方式是：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% pdf pdf链接 %&#125;</span><br></pre></td></tr></table></figure><p>官方的那个我总是编译出问题，所以下面给出方法二的效果：</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Markdown语法&quot;&gt;&lt;a href=&quot;#Markdown语法&quot; class=&quot;headerlink&quot; title=&quot;Markdown语法&quot;&gt;&lt;/a&gt;Markdown语法&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Markdown&lt;/code&gt; 语法差异比较多，不过常用的语法基</summary>
      
    
    
    
    <category term="markdown" scheme="https://superq314.github.io/categories/markdown/"/>
    
    
    <category term="markdown" scheme="https://superq314.github.io/tags/markdown/"/>
    
  </entry>
  
  <entry>
    <title>使用 Hexo+GitHub 搭建个人免费博客教程</title>
    <link href="https://superq314.github.io/2022/06/29/Hexo+Butterfly/Hexo/%E4%BD%BF%E7%94%A8%20Hexo+GitHub%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%85%8D%E8%B4%B9%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/"/>
    <id>https://superq314.github.io/2022/06/29/Hexo+Butterfly/Hexo/%E4%BD%BF%E7%94%A8%20Hexo+GitHub%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%85%8D%E8%B4%B9%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/</id>
    <published>2022-06-29T12:16:54.197Z</published>
    <updated>2022-06-29T12:21:03.392Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近些年来很多用户都喜欢使用 GitHub Pages 来搭建 Hexo 静态博客网站，其最吸引人的莫过于完全免费使用，并且非常稳定。</p><p>虽然搭建时比较麻烦，有点折腾，但是配置完成后，基本不需要操心维护的事，甚至放了几年都忘记了，打开来看文章依然还在。</p><p>本文就详细介绍下如何使用 Hexo + GitHub 搭建免费个人博客网站的教程。</p><p>为了照顾小白用户（第一次使用 GitHub 和 Hexo），尽可能详细，包括常见的坑和问题都有提示说明。下面目录中 <strong>第 3~5 步为最重要的步骤</strong> ，其他内容如果已经会的可以选择性跳过。</p><p>看起来有点繁杂，捋顺了倒也简单，认真跟教程走，完整操作一遍大概需要 30 分钟。</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="GitHub-Pages-是什么？"><a href="#GitHub-Pages-是什么？" class="headerlink" title="# GitHub Pages 是什么？"></a><strong># GitHub Pages 是什么？</strong></h3><ul><li><a href="https://link.zhihu.com/?target=https://help.github.com/en/articles/what-is-github-pages">What is GitHub Pages? - GitHub Help</a></li></ul><p>GitHub Pages 是由 GitHub 官方提供的一种免费的静态站点托管服务，让我们可以在 GitHub 仓库里托管和发布自己的静态网站页面。</p><h3 id="Hexo-是什么？"><a href="#Hexo-是什么？" class="headerlink" title="# Hexo 是什么？"></a><strong># Hexo 是什么？</strong></h3><ul><li>官网：<a href="https://link.zhihu.com/?target=https://hexo.io/zh-cn/">hexo.io</a></li></ul><p>Hexo 是一个快速、简洁且高效的静态博客框架，它基于 Node.js 运行，可以将我们撰写的 Markdown 文档解析渲染成静态的 HTML 网页。</p><h3 id="Hexo-GitHub-文章发布原理"><a href="#Hexo-GitHub-文章发布原理" class="headerlink" title="# Hexo + GitHub 文章发布原理"></a><strong># Hexo + GitHub 文章发布原理</strong></h3><p>在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。</p><p><img src="https://pic3.zhimg.com/80/v2-a193a47cf70fe6ecf156e5f3d34920ea_720w.jpg"></p><h3 id="优点和不足"><a href="#优点和不足" class="headerlink" title="# 优点和不足"></a><strong># 优点和不足</strong></h3><p> <strong>优点：</strong> 完全免费；静态站点，轻量快速；可按需求自由定制改造；托管在 GitHub，安全省心；迁移方便……</p><p> <strong>不足：</strong> 发文不便，依赖于本地环境；更适合个人博客使用；GitHub 在国内访问速度有点不快。</p><h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1. 准备"></a>1. 准备</h2><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="# 注意事项"></a><strong># 注意事项</strong></h3><ul><li>输入代码时，核对准确，最好切换成英文输入法；</li><li>将文中的 “用户名” 和 “邮箱” 替换为自己的 GitHub 账户名和绑定的邮箱；</li><li>统一使用 Git Bash 进行操作（支持 Win、Mac）；</li><li>小白请严格按步骤进行，不要跳！</li></ul><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="# 环境搭建"></a><strong># 环境搭建</strong></h3><p>Hexo 基于 Node.js，搭建过程中还需要使用 npm（Node.js 已带） 和 git，因此先搭建本地操作环境，安装 Node.js 和 Git。</p><ul><li>Node.js：<a href="https://link.zhihu.com/?target=https://nodejs.org/zh-cn">https:&#x2F;&#x2F;<strong>nodejs.org&#x2F;zh-cn</strong></a></li><li>Git：<a href="https://link.zhihu.com/?target=https://git-scm.com/downloads">https:&#x2F;&#x2F;<strong>git-scm.com&#x2F;downloads</strong></a></li></ul><p>下载 Node.js 和 Git 程序并安装，一路点 “下一步” 按默认配置完成安装。</p><p>安装完成后，Win+R 输入 cmd 并打开，依次输入 <code>node -v</code>、<code>npm -v</code> 和 <code>git --version</code> 并回车，如下图出现程序版本号即可。</p><p><img src="https://pic1.zhimg.com/80/v2-27b47b5ae479ce7987851292a67774b0_720w.jpg"></p><h2 id="2-连接-Github"><a href="#2-连接-Github" class="headerlink" title="2. 连接 Github"></a>2. 连接 Github</h2><p>使用邮箱注册 <a href="https://link.zhihu.com/?target=https://github.com/">GitHub</a> 账户，选择免费账户（Free），并完成邮件验证。</p><p>右键 -&gt; Git Bash Here， <strong>设置用户名和邮箱</strong> ：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;GitHub 用户名&quot;</span><br><span class="line">git config --global user.email &quot;GitHub 邮箱&quot;</span><br></pre></td></tr></table></figure><p> <strong>创建 SSH 密匙</strong> ：</p><p>输入 <code>ssh-keygen -t rsa -C &quot;GitHub 邮箱&quot;</code>，然后一路回车。</p><p><strong>添加密匙：</strong></p><p>进入 [C:\Users\用户名.ssh] 目录（要勾选显示“隐藏的项目”），用记事本打开公钥 id_rsa.pub 文件并复制里面的内容。</p><p>登陆 GitHub ，进入 Settings 页面，选择左边栏的 SSH and GPG keys，点击 New SSH key。</p><p>Title 随便取个名字，粘贴复制的 id_rsa.pub 内容到 Key 中，点击 Add SSH key 完成添加。</p><p><img src="https://pic1.zhimg.com/80/v2-9125065afd24332d7cd84feb6a350730_720w.jpg"></p><p><strong>验证连接：</strong></p><p>打开 Git Bash，输入 <code>ssh -T git@github.com</code> 出现 “Are you sure……”，输入 yes 回车确认。</p><p><img src="https://pic3.zhimg.com/80/v2-b4c7524a2451f4ab42f9c22ea3c7b6be_720w.jpg"></p><p>显示 “Hi xxx! You’ve successfully……” 即连接成功。</p><h2 id="3-创建-Github-Pages-仓库"><a href="#3-创建-Github-Pages-仓库" class="headerlink" title="3. 创建 Github Pages 仓库"></a>3. 创建 Github Pages 仓库</h2><p>GitHub 主页右上角加号 -&gt; New repository：</p><ul><li>Repository name 中输入 <code>用户名.github.io</code></li><li>勾选 “Initialize this repository with a README”</li><li>Description 选填</li></ul><p>填好后点击 Create repository 创建。</p><p><img src="https://pic2.zhimg.com/80/v2-67a8165154f4c5f4a6333e76e78ed815_720w.jpg"></p><p>创建后默认自动启用 HTTPS，博客地址为：<code>https://用户名.github.io</code></p><h2 id="4-本地安装-Hexo-博客程序"><a href="#4-本地安装-Hexo-博客程序" class="headerlink" title="4. 本地安装 Hexo 博客程序"></a>4. 本地安装 Hexo 博客程序</h2><p>新建一个文件夹用来存放 Hexo 的程序文件，如 Hexo-Blog。打开该文件夹，右键 -&gt; Git Bash Here。</p><h3 id="4-1-安装-Hexo"><a href="#4-1-安装-Hexo" class="headerlink" title="# 4.1 安装 Hexo"></a><strong># 4.1 安装 Hexo</strong></h3><p>使用 npm 一键安装 Hexo 博客程序：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>Mac 用户需要管理员权限（sudo），运行这条命令：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>安装时间有点久（真的很慢！），界面也没任何反应， <strong>耐心等待</strong> ，安装完成后如下图。</p><p><img src="https://pic2.zhimg.com/80/v2-01e7fc8bb9280437deb437bf73a190a1_720w.jpg"></p><h3 id="4-2-Hexo-初始化和本地预览"><a href="#4-2-Hexo-初始化和本地预览" class="headerlink" title="# 4.2 Hexo 初始化和本地预览"></a><strong># 4.2 Hexo 初始化和本地预览</strong></h3><p><strong>初始化并安装所需组件：</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo init      # 初始化</span><br><span class="line">npm install    # 安装组件</span><br></pre></td></tr></table></figure><p>完成后依次输入下面命令， <strong>启动本地服务器进行预览</strong> ：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo g   # 生成页面</span><br><span class="line">hexo s   # 启动预览</span><br></pre></td></tr></table></figure><p>**访问 **<code>http://localhost:4000</code><strong>，出现 Hexo 默认页面，本地博客安装成功！</strong></p><p><img src="https://pic4.zhimg.com/80/v2-1c3baeecf1ef3bec5c8ef3f14639f68b_720w.jpg"></p><p> <strong>Tips：</strong> 如果出现页面加载不出来，可能是端口被占用了。Ctrl+C 关闭服务器，运行 <code>hexo server -p 5000</code> 更改端口号后重试。</p><p>Hexo 博客文件夹目录结构如下：</p><p><img src="https://pic1.zhimg.com/80/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.jpg"></p><h2 id="5-部署-Hexo-到-GitHub-Pages"><a href="#5-部署-Hexo-到-GitHub-Pages" class="headerlink" title="5. 部署 Hexo 到 GitHub Pages"></a>5. 部署 Hexo 到 GitHub Pages</h2><p>本地博客测试成功后，就是上传到 GitHub 进行部署，使其能够在网络上访问。</p><p>首先 <strong>安装 hexo-deployer-git</strong> ：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>然后<strong>修改 _config.yml</strong> 文件末尾的 Deployment 部分，修改成如下：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:用户名/用户名.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>完成后运行 <code>hexo d</code> 将网站上传部署到 GitHub Pages。</p><p>完成！这时访问我们的 GitHub 域名 <code>https://用户名.github.io</code> 就可以看到 Hexo 网站了。</p><h2 id="6-绑定域名（可选）"><a href="#6-绑定域名（可选）" class="headerlink" title="6. 绑定域名（可选）"></a>6. 绑定域名（可选）</h2><p>博客搭建完成使用的是 GitHub 的子域名（用户名.<a href="https://link.zhihu.com/?target=http://github.io">http:&#x2F;&#x2F;<strong>github.io</strong></a>），我们可以为 Hexo 博客绑定自己的域名替换 GitHub 域名，更加个性化和专业，也利于 SEO。</p><p>我们使用 <a href="https://link.zhihu.com/?target=https://www.namesilo.com/?rid=d27fa32do">Namesilo</a> 进行注册，便宜好用没啥套路，使用优惠码 <code>okoff</code> 优惠一美元，com 域名大概 50 块一年。</p><h3 id="6-1-域名注册和解析"><a href="#6-1-域名注册和解析" class="headerlink" title="# 6.1 域名注册和解析"></a><strong># 6.1 域名注册和解析</strong></h3><ul><li>域名注册和解析教程：<a href="https://zhuanlan.zhihu.com/p/33921436">Namesilo 域名购买及使用教程</a></li></ul><p>按上面教程注册并解析域名，在 DNS 设置部分，删除自带的记录，然后添加 CNAME 记录将 www 域名解析指向 <code>用户名.github.io</code>。</p><p><img src="https://pic3.zhimg.com/80/v2-d5d37c8ad523d8ab5c7c200fabc9585e_720w.jpg"></p><h3 id="6-2-绑定域名到-Hexo-博客"><a href="#6-2-绑定域名到-Hexo-博客" class="headerlink" title="# 6.2 绑定域名到 Hexo 博客"></a><strong># 6.2 绑定域名到 Hexo 博客</strong></h3><p>进入本地博客文件夹的 source 目录，打开记事本，里面输入自己的域名，如 <a href="http://www.example.com,保存名称为/">http://www.example.com，保存名称为</a> “CNAME”，格式为 “所有文件”（无 .txt 后缀）。</p><p>清除缓存等文件并重新发布网站：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo clean   # 清除缓存文件等</span><br><span class="line">hexo g       # 生成页面</span><br><span class="line">hexo s       # 启动预览</span><br></pre></td></tr></table></figure><p>现在就可以使用自己的域名访问 Hexo 博客了。</p><h3 id="6-3-开启-HTTPS"><a href="#6-3-开启-HTTPS" class="headerlink" title="# 6.3 开启 HTTPS"></a><strong># 6.3 开启 HTTPS</strong></h3><p>配置自己的域名后，需要我们手动开启 HTTPS。打开博客所在 GitHub 仓库，Settings -&gt; 下拉找到 GitHub Pages -&gt; 勾选 Enforce HTTPS。</p><p><img src="https://pic4.zhimg.com/80/v2-54f8744afc9746884e6b3acecfc5f8cf_720w.jpg"></p><p>HTTPS 证书部署成功需要一定时间，等大概几分钟再访问域名，就可以看到域名前面的小绿锁了，HTTPS 配置完成！</p><h2 id="7-开始使用"><a href="#7-开始使用" class="headerlink" title="7. 开始使用"></a>7. 开始使用</h2><h3 id="7-1-发布文章"><a href="#7-1-发布文章" class="headerlink" title="# 7.1 发布文章"></a><strong># 7.1 发布文章</strong></h3><p>进入博客所在目录，右键打开 Git Bash Here，创建博文：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo new &quot;My New Post&quot;</span><br></pre></td></tr></table></figure><p>然后 source 文件夹中会出现一个 My New Post.md 文件，就可以使用 Markdown 编辑器在该文件中撰写文章了。</p><p>写完后运行下面代码将文章渲染并部署到 GitHub Pages 上完成发布。<strong>以后每次发布文章都是这两条命令。</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo g   # 生成页面</span><br><span class="line">hexo d   # 部署发布</span><br></pre></td></tr></table></figure><hr><p>也可以不使用命令自己创建 .md 文件，只需在文件开头手动加入如下格式 Front-matter 即可，写完后运行 <code>hexo g</code> 和 <code>hexo d</code> 发布。</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World # 标题</span><br><span class="line">date: 2019/3/26 hh:mm:ss # 时间</span><br><span class="line">categories: # 分类</span><br><span class="line">- Diary</span><br><span class="line">tags: # 标签</span><br><span class="line">- PS3</span><br><span class="line">- Games</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">摘要</span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line">正文</span><br></pre></td></tr></table></figure><h3 id="7-2-网站设置"><a href="#7-2-网站设置" class="headerlink" title="# 7.2 网站设置"></a><strong># 7.2 网站设置</strong></h3><p>包括网站名称、描述、作者、链接样式等，全部在网站目录下的 _config.yml 文件中，参考<a href="https://link.zhihu.com/?target=https://hexo.io/zh-cn/docs/configuration">官方文档</a>按需要编辑。</p><p>注意：冒号后要加一个空格！</p><h3 id="7-3-更换主题"><a href="#7-3-更换主题" class="headerlink" title="# 7.3 更换主题"></a><strong># 7.3 更换主题</strong></h3><p>在 <a href="https://link.zhihu.com/?target=https://hexo.io/themes/">Themes | Hexo</a> 选择一个喜欢的主题，比如 <a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/getting-started.html">NexT</a>，进入网站目录打开 Git Bash Here 下载主题：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>然后修改 _config.yml 中的 theme 为新主题名称 next，发布。（有的主题需要将 _config.yml 替换为主题自带的，参考主题说明。）</p><h3 id="7-4-常用命令"><a href="#7-4-常用命令" class="headerlink" title="# 7.4 常用命令"></a><strong># 7.4 常用命令</strong></h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">hexo new &quot;name&quot;       # 新建文章</span><br><span class="line">hexo new page &quot;name&quot;  # 新建页面</span><br><span class="line">hexo g                # 生成页面</span><br><span class="line">hexo d                # 部署</span><br><span class="line">hexo g -d             # 生成页面并部署</span><br><span class="line">hexo s                # 本地预览</span><br><span class="line">hexo clean            # 清除缓存和已生成的静态文件</span><br><span class="line">hexo help             # 帮助</span><br></pre></td></tr></table></figure><h2 id="8-常见问题"><a href="#8-常见问题" class="headerlink" title="8 常见问题"></a>8 常见问题</h2><p><strong>1、Hexo 设置显示文章摘要，首页不显示全文</strong></p><p>Hexo 主页文章列表默认会显示文章全文，浏览时很不方便，可以在文章中插入 <code>&lt;!--more--&gt;</code> 进行分段。</p><p>该代码前面的内容会作为摘要显示，而后面的内容会替换为 “Read More” 隐藏起来。</p><p><img src="https://pic4.zhimg.com/80/v2-45701cf120ca77e6733ad30b40666f33_720w.jpg"></p><p><strong>2、设置网站图标</strong></p><p>进入 themes&#x2F;主题 文件夹，打开 _config.yml 配置文件，找到 favicon 修改，一般格式为：<code>favicon: 图标地址</code>。（不同主题可能略有差别）</p><p><strong>3、修改并部署后没有效果</strong></p><p>使用 <code>hexo clean</code> 清理后重新部署。</p><p><strong>4、开启 HTTPS 后访问网站显示连接不安全？</strong></p><p>证书还未部署生效，等待一会儿，清除浏览器缓存再试。</p><p><strong>5、Mac 安装 Hexo 报错无法安装</strong></p><p>Mac 用户需要管理员权限运行，使用 <code>sudo npm install -g hexo-cli</code> 命令安装。</p><p><strong>6、npm 下载速度慢，甚至完全没反应</strong></p><p>使用 npm 安装程序等待很久也没反应，或者下载速度很慢，可以更换 npm 源为国内 npm 镜像。</p><p>临时更换方法：在 npm 安装命令后面加上：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">--registry https://registry.npm.taobao.org </span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>Hexo 是一种纯静态的博客，我们必须要在本地完成文章的编辑再部署到 GitHub 上，依赖于本地环境。不能像 WordPress 或 Typecho 那样的动态博客一样能直接在浏览器中完成撰文和发布。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;近些年来很多用户都喜欢使用 GitHub Pages 来搭建 Hexo 静态博客网站，其最吸引人的莫过于完全免费使用，并且非常稳定。&lt;/p&gt;</summary>
      
    
    
    
    <category term="Git" scheme="https://superq314.github.io/categories/Git/"/>
    
    <category term="Hexo" scheme="https://superq314.github.io/categories/Git/Hexo/"/>
    
    
    <category term="创建个人网站（基于GitHub + hexo）" scheme="https://superq314.github.io/tags/%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%EF%BC%88%E5%9F%BA%E4%BA%8EGitHub-hexo%EF%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>前后端开发项目</title>
    <link href="https://superq314.github.io/2022/06/29/%E9%A1%B9%E7%9B%AE/%E5%89%8D%E5%90%8E%E7%AB%AF/"/>
    <id>https://superq314.github.io/2022/06/29/%E9%A1%B9%E7%9B%AE/%E5%89%8D%E5%90%8E%E7%AB%AF/</id>
    <published>2022-06-29T04:22:10.530Z</published>
    <updated>2022-06-29T04:35:22.296Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaWeb项目"><a href="#JavaWeb项目" class="headerlink" title="JavaWeb项目"></a>JavaWeb项目</h1><h2 id="学之思在线考试系统"><a href="#学之思在线考试系统" class="headerlink" title="学之思在线考试系统"></a>学之思在线考试系统</h2><p>这个项目是是一款 Spring 技术栈 + Vue.js 的前后端分离的考试系统，分为学生端、用户端、小程序端，能覆盖到 PC 和移动端。。界面美观、设计友好、代码结构清晰，即使是应届生找工作，这个项目也是不错的练手手项目。</p><p>并且支持多种部署方式：集成部署、前后端分离部署、docker部署。</p><p>地址：<a href="https://github.com/mindskip/xzs">github.com&#x2F;mindskip&#x2F;xzs</a></p><h2 id="外卖系统"><a href="#外卖系统" class="headerlink" title="外卖系统"></a><strong>外卖系统</strong></h2><p>一个完整的外卖系统，包括手机端，后台管理。基于 Spring Boot 和 Vue 的前后端分离的外卖系统，包含完整的手机端，后台管理功能。</p><p>地址：<a href="gitee.com/microapp/flash-waimai">gitee.com&#x2F;microapp&#x2F;flash-waimai</a></p><h1 id="移动端项目"><a href="#移动端项目" class="headerlink" title="移动端项目"></a>移动端项目</h1><h2 id="仿美团外卖点餐"><a href="#仿美团外卖点餐" class="headerlink" title="仿美团外卖点餐"></a>仿美团外卖点餐</h2><p>前端用 vue+vuex+vue-router+axios，后端基于nodej.s的框架，数据库采用mongodb。功能涉及登录，定位，浏览商品，加购物车，下订单，支付(微信、支付宝扫码支付)，评价，个人信息更改。</p><p>项目地址：<a href="https://github.com/zwStar/vue-meituan">github.com&#x2F;zwStar&#x2F;vue-meituangithub.com&#x2F;zwStar&#x2F;vue-meituan</a></p><h2 id="精仿今日头条"><a href="#精仿今日头条" class="headerlink" title="精仿今日头条"></a>精仿今日头条</h2><p>数据是抓取今日头条App的数据。使用 RxJava + Retrofit + MVP 开发的开源项目。</p><p>项目地址：<a href="https://github.com/chaychan/TouTiao">github.com&#x2F;chaychan&#x2F;TouTiao</a></p><h2 id="iOS-仿抖音"><a href="#iOS-仿抖音" class="headerlink" title="iOS 仿抖音"></a>iOS 仿抖音</h2><p>这个抖音 Demo 适配 iPhone、iPad，同时兼容 iOS 8.0 - iOS 12.0系统。采用 Object-C 语言编写。标星 1.5K Star，项目地址：</p><p><a href="https://github.com/sshiqiao/douyin-ios-objectc">github.com&#x2F;sshiqiao&#x2F;douyin-ios-objectc</a></p><p>本项目共分为三个部分：抖音个人主页实现、网络视频相关功能实现、WebSocket 实现 IM 即时聊天功能。</p><h2 id="Android-仿抖音"><a href="#Android-仿抖音" class="headerlink" title="Android 仿抖音"></a>Android 仿抖音</h2><p>这个 Demo 涉及的技术要点如下：</p><p>Recycler + PagerSnapHelper 实现全屏切换播放效果，<br>使用 Lottie 库加载 Json 动画<br>BottomSheetDialogFragment 实现分享评论弹框功能<br>CoordinatorLayout + AppBarLayout 实现折叠布局。<br>该项目标星 1K Star，项目地址：<a href="https://github.com/running-libo/Tiktok">github.com&#x2F;running-libo&#x2F;Tiktok</a></p><h2 id="秀视频"><a href="#秀视频" class="headerlink" title="秀视频"></a>秀视频</h2><p>这个项目是一个短视频社交小程序，系统包括用户端和后台管理端。用户可以在小程序上发布自己的短视频，并且经过我们的平台加入滤镜或者背景音乐制作出独具特色的短视频。具备点赞、评论、下载、分享、转发等功能。技术栈如下：</p><p>前端: H5、CSS、JavaScript 、JQuery、Bootstrap、Themeleaf</p><p>后端：Spring Cloud、Spring Boot、Sping、Spring MVC、MyBatis、MySQL、Redis、Shiro</p><p>组件：Bootsrap-table、webUploader、PageHelper</p><p>项目地址：<a href="https://github.com/RAOE/show-videos">github.com&#x2F;RAOE&#x2F;show-videos</a></p><h2 id="斗鱼直播-APP"><a href="#斗鱼直播-APP" class="headerlink" title="斗鱼直播 APP"></a>斗鱼直播 APP</h2><p>flutter 重构的斗鱼直播 APP，首页、娱乐为Material组件；直播间、鱼吧为纯自定义编写。</p><p>地址：<a href="https://github.com/yukilzw/dy_flutter">github.com&#x2F;yukilzw&#x2F;dy_flutter</a></p><h2 id="仿网易云音乐"><a href="#仿网易云音乐" class="headerlink" title="仿网易云音乐"></a>仿网易云音乐</h2><p>基于 flutter 的仿网易云音乐软件，支持 iOS 和 Android。</p><p>地址：<a href="https://github.com/boyan01/flutter-netease-music">github.com&#x2F;boyan01&#x2F;flutter-netease-music</a></p><h2 id="高仿-B站"><a href="#高仿-B站" class="headerlink" title="高仿 B站"></a>高仿 B站</h2><p>基于 react + express 高仿B站 Web 移动端</p><p>链接：<a href="https://github.com/dxx/react-bilibili">github.com&#x2F;dxx&#x2F;react-bilibili</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JavaWeb项目&quot;&gt;&lt;a href=&quot;#JavaWeb项目&quot; class=&quot;headerlink&quot; title=&quot;JavaWeb项目&quot;&gt;&lt;/a&gt;JavaWeb项目&lt;/h1&gt;&lt;h2 id=&quot;学之思在线考试系统&quot;&gt;&lt;a href=&quot;#学之思在线考试系统&quot; class</summary>
      
    
    
    
    <category term="项目开发" scheme="https://superq314.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>前端开发项目</title>
    <link href="https://superq314.github.io/2022/06/29/%E9%A1%B9%E7%9B%AE/%E5%89%8D%E7%AB%AF/"/>
    <id>https://superq314.github.io/2022/06/29/%E9%A1%B9%E7%9B%AE/%E5%89%8D%E7%AB%AF/</id>
    <published>2022-06-29T04:21:59.448Z</published>
    <updated>2022-06-29T04:35:25.514Z</updated>
    
    
    
    
    <category term="项目开发" scheme="https://superq314.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>语法——SVG教程</title>
    <link href="https://superq314.github.io/2022/06/28/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/%E8%AF%AD%E6%B3%95-SVG%E6%95%99%E7%A8%8B/"/>
    <id>https://superq314.github.io/2022/06/28/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/%E8%AF%AD%E6%B3%95-SVG%E6%95%99%E7%A8%8B/</id>
    <published>2022-06-27T16:33:11.784Z</published>
    <updated>2022-06-27T16:35:32.582Z</updated>
    
    
    
    
    <category term="前端开发-语法" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/"/>
    
    
    <category term="SVG" scheme="https://superq314.github.io/tags/SVG/"/>
    
  </entry>
  
  <entry>
    <title>框架</title>
    <link href="https://superq314.github.io/2022/06/28/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E6%A1%86%E6%9E%B6/%E6%A1%86%E6%9E%B6/"/>
    <id>https://superq314.github.io/2022/06/28/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E6%A1%86%E6%9E%B6/%E6%A1%86%E6%9E%B6/</id>
    <published>2022-06-27T16:10:32.364Z</published>
    <updated>2022-06-27T16:13:39.206Z</updated>
    
    <content type="html"><![CDATA[<h2 id="React-Class-组件有哪些周期函数？分别有什么作用？"><a href="#React-Class-组件有哪些周期函数？分别有什么作用？" class="headerlink" title="React Class 组件有哪些周期函数？分别有什么作用？"></a>React Class 组件有哪些周期函数？分别有什么作用？</h2><h2 id="React-Class-组件中请求可以在-componentWillMount-中发起吗？为什么？"><a href="#React-Class-组件中请求可以在-componentWillMount-中发起吗？为什么？" class="headerlink" title="React Class 组件中请求可以在 componentWillMount 中发起吗？为什么？"></a>React Class 组件中请求可以在 componentWillMount 中发起吗？为什么？</h2><h2 id="React-Class-组件和-React-Hook-的区别有哪些？"><a href="#React-Class-组件和-React-Hook-的区别有哪些？" class="headerlink" title="React Class 组件和 React Hook 的区别有哪些？"></a>React Class 组件和 React Hook 的区别有哪些？</h2><h2 id="React-中高阶函数和自定义-Hook-的优缺点？"><a href="#React-中高阶函数和自定义-Hook-的优缺点？" class="headerlink" title="React 中高阶函数和自定义 Hook 的优缺点？"></a>React 中高阶函数和自定义 Hook 的优缺点？</h2><h2 id="简要说明-React-Hook-中-useState-和-useEffect-的运行原理？"><a href="#简要说明-React-Hook-中-useState-和-useEffect-的运行原理？" class="headerlink" title="简要说明 React Hook 中 useState 和 useEffect 的运行原理？"></a>简要说明 React Hook 中 useState 和 useEffect 的运行原理？</h2><h2 id="React-如何发现重渲染、什么原因容易造成重渲染、如何避免重渲染？"><a href="#React-如何发现重渲染、什么原因容易造成重渲染、如何避免重渲染？" class="headerlink" title="React 如何发现重渲染、什么原因容易造成重渲染、如何避免重渲染？"></a>React 如何发现重渲染、什么原因容易造成重渲染、如何避免重渲染？</h2><h2 id="React-Hook-中-useEffect-有哪些参数，如何检测数组依赖项的变化？"><a href="#React-Hook-中-useEffect-有哪些参数，如何检测数组依赖项的变化？" class="headerlink" title="React Hook 中 useEffect 有哪些参数，如何检测数组依赖项的变化？"></a>React Hook 中 useEffect 有哪些参数，如何检测数组依赖项的变化？</h2><h2 id="React-的-useEffect-是如何监听数组依赖项的变化的？"><a href="#React-的-useEffect-是如何监听数组依赖项的变化的？" class="headerlink" title="React 的 useEffect 是如何监听数组依赖项的变化的？"></a>React 的 useEffect 是如何监听数组依赖项的变化的？</h2><h2 id="React-Hook-和闭包有什么关联关系？"><a href="#React-Hook-和闭包有什么关联关系？" class="headerlink" title="React Hook 和闭包有什么关联关系？"></a>React Hook 和闭包有什么关联关系？</h2><h2 id="React-中-useState-是如何做数据初始化的？"><a href="#React-中-useState-是如何做数据初始化的？" class="headerlink" title="React 中 useState 是如何做数据初始化的？"></a>React 中 useState 是如何做数据初始化的？</h2><h2 id="列举你常用的-React-性能优化技巧？"><a href="#列举你常用的-React-性能优化技巧？" class="headerlink" title="列举你常用的 React 性能优化技巧？"></a>列举你常用的 React 性能优化技巧？</h2><h2 id="Vue-2-x-模板中的指令是如何解析实现的？"><a href="#Vue-2-x-模板中的指令是如何解析实现的？" class="headerlink" title="Vue 2.x 模板中的指令是如何解析实现的？"></a>Vue 2.x 模板中的指令是如何解析实现的？</h2><h2 id="简要说明-Vue-2-x-的全链路运作机制？"><a href="#简要说明-Vue-2-x-的全链路运作机制？" class="headerlink" title="简要说明 Vue 2.x 的全链路运作机制？"></a>简要说明 Vue 2.x 的全链路运作机制？</h2><h2 id="简单介绍一下-Element-UI-的框架设计？"><a href="#简单介绍一下-Element-UI-的框架设计？" class="headerlink" title="简单介绍一下 Element UI 的框架设计？"></a>简单介绍一下 Element UI 的框架设计？</h2><h2 id="如何理解-Vue-是一个渐进式框架？"><a href="#如何理解-Vue-是一个渐进式框架？" class="headerlink" title="如何理解 Vue 是一个渐进式框架？"></a>如何理解 Vue 是一个渐进式框架？</h2><h2 id="Vue-里实现跨组件通信的方式有哪些？"><a href="#Vue-里实现跨组件通信的方式有哪些？" class="headerlink" title="Vue 里实现跨组件通信的方式有哪些？"></a>Vue 里实现跨组件通信的方式有哪些？</h2><h2 id="Vue-中响应式数据是如何做到对某个对象的深层次属性的监听的？"><a href="#Vue-中响应式数据是如何做到对某个对象的深层次属性的监听的？" class="headerlink" title="Vue 中响应式数据是如何做到对某个对象的深层次属性的监听的？"></a>Vue 中响应式数据是如何做到对某个对象的深层次属性的监听的？</h2><h2 id="MVVM、MVC-和-MVP-的区别是什么？各自有什么应用场景？、"><a href="#MVVM、MVC-和-MVP-的区别是什么？各自有什么应用场景？、" class="headerlink" title="MVVM、MVC 和 MVP 的区别是什么？各自有什么应用场景？、"></a>MVVM、MVC 和 MVP 的区别是什么？各自有什么应用场景？、</h2><h2 id="什么是-MVVM-框架？"><a href="#什么是-MVVM-框架？" class="headerlink" title="什么是 MVVM 框架？"></a>什么是 MVVM 框架？</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;React-Class-组件有哪些周期函数？分别有什么作用？&quot;&gt;&lt;a href=&quot;#React-Class-组件有哪些周期函数？分别有什么作用？&quot; class=&quot;headerlink&quot; title=&quot;React Class 组件有哪些周期函数？分别有什么作用？&quot;&gt;</summary>
      
    
    
    
    <category term="前端开发" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="框架" scheme="https://superq314.github.io/tags/%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>语法——Typescript</title>
    <link href="https://superq314.github.io/2022/06/27/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/%E8%AF%AD%E6%B3%95-Typescript/"/>
    <id>https://superq314.github.io/2022/06/27/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/%E8%AF%AD%E6%B3%95-Typescript/</id>
    <published>2022-06-27T15:04:56.048Z</published>
    <updated>2022-06-27T17:09:09.015Z</updated>
    
    <content type="html"><![CDATA[<h2 id="为什么要使用-TypeScript-TypeScript-相对于-JavaScript-的优势是什么？"><a href="#为什么要使用-TypeScript-TypeScript-相对于-JavaScript-的优势是什么？" class="headerlink" title="为什么要使用 TypeScript ? TypeScript 相对于 JavaScript 的优势是什么？"></a>为什么要使用 TypeScript ? TypeScript 相对于 JavaScript 的优势是什么？</h2><h2 id="TypeScript-中-const-和-readonly-的区别？枚举和常量枚举的区别？接口和类型别名的区别？"><a href="#TypeScript-中-const-和-readonly-的区别？枚举和常量枚举的区别？接口和类型别名的区别？" class="headerlink" title="TypeScript 中 const 和 readonly 的区别？枚举和常量枚举的区别？接口和类型别名的区别？"></a>TypeScript 中 const 和 readonly 的区别？枚举和常量枚举的区别？接口和类型别名的区别？</h2><h2 id="TypeScript-中-any-类型的作用是什么？"><a href="#TypeScript-中-any-类型的作用是什么？" class="headerlink" title="TypeScript 中 any 类型的作用是什么？"></a>TypeScript 中 any 类型的作用是什么？</h2><h2 id="TypeScript-中-any、never、unknown-和-void-有什么区别？"><a href="#TypeScript-中-any、never、unknown-和-void-有什么区别？" class="headerlink" title="TypeScript 中 any、never、unknown 和 void 有什么区别？"></a>TypeScript 中 any、never、unknown 和 void 有什么区别？</h2><h2 id="TypeScript-中-interface-可以给-Function-x2F-Array-x2F-Class（Indexable）做声明吗？"><a href="#TypeScript-中-interface-可以给-Function-x2F-Array-x2F-Class（Indexable）做声明吗？" class="headerlink" title="TypeScript 中 interface 可以给 Function &#x2F; Array &#x2F; Class（Indexable）做声明吗？"></a>TypeScript 中 interface 可以给 Function &#x2F; Array &#x2F; Class（Indexable）做声明吗？</h2><h2 id="TypeScript-中可以使用-String、Number、Boolean、Symbol、Object-等给类型做声明吗？"><a href="#TypeScript-中可以使用-String、Number、Boolean、Symbol、Object-等给类型做声明吗？" class="headerlink" title="TypeScript 中可以使用 String、Number、Boolean、Symbol、Object 等给类型做声明吗？"></a>TypeScript 中可以使用 String、Number、Boolean、Symbol、Object 等给类型做声明吗？</h2><h2 id="TypeScript-中的-this-和-JavaScript-中的-this-有什么差异？"><a href="#TypeScript-中的-this-和-JavaScript-中的-this-有什么差异？" class="headerlink" title="TypeScript 中的 this 和 JavaScript 中的 this 有什么差异？"></a>TypeScript 中的 this 和 JavaScript 中的 this 有什么差异？</h2><h2 id="TypeScript-中使用-Unions-时有哪些注意事项？"><a href="#TypeScript-中使用-Unions-时有哪些注意事项？" class="headerlink" title="TypeScript 中使用 Unions 时有哪些注意事项？"></a>TypeScript 中使用 Unions 时有哪些注意事项？</h2><h2 id="TypeScript-如何设计-Class-的声明？"><a href="#TypeScript-如何设计-Class-的声明？" class="headerlink" title="TypeScript 如何设计 Class 的声明？"></a>TypeScript 如何设计 Class 的声明？</h2><h2 id="TypeScript-中如何联合枚举类型的-Key"><a href="#TypeScript-中如何联合枚举类型的-Key" class="headerlink" title="TypeScript 中如何联合枚举类型的 Key?"></a>TypeScript 中如何联合枚举类型的 Key?</h2><h2 id="TypeScript-中-、-、-、-、-等符号的含义？"><a href="#TypeScript-中-、-、-、-、-等符号的含义？" class="headerlink" title="TypeScript 中 ?.、??、!.、_、** 等符号的含义？"></a>TypeScript 中 ?.、??、!.、_、** 等符号的含义？</h2><h2 id="TypeScript-中预定义的有条件类型有哪些？"><a href="#TypeScript-中预定义的有条件类型有哪些？" class="headerlink" title="TypeScript 中预定义的有条件类型有哪些？"></a>TypeScript 中预定义的有条件类型有哪些？</h2><h2 id="简单介绍一下-TypeScript-模块的加载机制？"><a href="#简单介绍一下-TypeScript-模块的加载机制？" class="headerlink" title="简单介绍一下 TypeScript 模块的加载机制？"></a>简单介绍一下 TypeScript 模块的加载机制？</h2><h2 id="简单聊聊你对-TypeScript-类型兼容性的理解？抗变、双变、协变和逆变的简单理解？"><a href="#简单聊聊你对-TypeScript-类型兼容性的理解？抗变、双变、协变和逆变的简单理解？" class="headerlink" title="简单聊聊你对 TypeScript 类型兼容性的理解？抗变、双变、协变和逆变的简单理解？"></a>简单聊聊你对 TypeScript 类型兼容性的理解？抗变、双变、协变和逆变的简单理解？</h2><h2 id="TypeScript-中对象展开会有什么副作用吗？"><a href="#TypeScript-中对象展开会有什么副作用吗？" class="headerlink" title="TypeScript 中对象展开会有什么副作用吗？"></a>TypeScript 中对象展开会有什么副作用吗？</h2><h2 id="TypeScript-中-interface、type、enum-声明有作用域的功能吗？"><a href="#TypeScript-中-interface、type、enum-声明有作用域的功能吗？" class="headerlink" title="TypeScript 中 interface、type、enum 声明有作用域的功能吗？"></a>TypeScript 中 interface、type、enum 声明有作用域的功能吗？</h2><h2 id="TypeScript-中同名的-interface-或者同名的-interface-和-class-可以合并吗？"><a href="#TypeScript-中同名的-interface-或者同名的-interface-和-class-可以合并吗？" class="headerlink" title="TypeScript 中同名的 interface 或者同名的 interface 和 class 可以合并吗？"></a>TypeScript 中同名的 interface 或者同名的 interface 和 class 可以合并吗？</h2><h2 id="如何使-TypeScript-项目引入并识别编译为-JavaScript-的-npm-库包？"><a href="#如何使-TypeScript-项目引入并识别编译为-JavaScript-的-npm-库包？" class="headerlink" title="如何使 TypeScript 项目引入并识别编译为 JavaScript 的 npm 库包？"></a>如何使 TypeScript 项目引入并识别编译为 JavaScript 的 npm 库包？</h2><h2 id="TypeScript-的-tsconfig-json-中有哪些配置项信息？"><a href="#TypeScript-的-tsconfig-json-中有哪些配置项信息？" class="headerlink" title="TypeScript 的 tsconfig.json 中有哪些配置项信息？"></a>TypeScript 的 tsconfig.json 中有哪些配置项信息？</h2><h2 id="TypeScript-中如何设置模块导入的路径别名？"><a href="#TypeScript-中如何设置模块导入的路径别名？" class="headerlink" title="TypeScript 中如何设置模块导入的路径别名？"></a>TypeScript 中如何设置模块导入的路径别名？</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;为什么要使用-TypeScript-TypeScript-相对于-JavaScript-的优势是什么？&quot;&gt;&lt;a href=&quot;#为什么要使用-TypeScript-TypeScript-相对于-JavaScript-的优势是什么？&quot; class=&quot;headerlin</summary>
      
    
    
    
    <category term="前端开发-语法" scheme="https://superq314.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E8%AF%AD%E6%B3%95/"/>
    
    
    <category term="Typescript" scheme="https://superq314.github.io/tags/Typescript/"/>
    
  </entry>
  
  <entry>
    <title>编程范式</title>
    <link href="https://superq314.github.io/2022/06/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/"/>
    <id>https://superq314.github.io/2022/06/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/</id>
    <published>2022-06-27T14:20:08.193Z</published>
    <updated>2022-06-27T15:08:34.786Z</updated>
    
    <content type="html"><![CDATA[<h1 id="编程范式"><a href="#编程范式" class="headerlink" title="编程范式"></a>编程范式</h1><h2 id="列举你所了解的编程范式？"><a href="#列举你所了解的编程范式？" class="headerlink" title="列举你所了解的编程范式？"></a>列举你所了解的编程范式？</h2><p>编程范式（Programming paradigm）是指计算机编程的基本风格或者典型模式，可以简单理解为编程学科中实践出来的具有哲学和理论依据的一些经典原型。常见的编程范式有：</p><ul><li>面向过程（Process Oriented Programming，POP）</li><li>面向对象（Object Oriented Programming，OOP）</li><li>面向接口（Interface Oriented Programming， IOP）</li><li>面向切面（Aspect Oriented Programming，AOP）</li><li>函数式（Funtional Programming，FP）</li><li>响应式（Reactive Programming，RP）</li><li>函数响应式（Functional Reactive Programming，FRP）</li></ul><blockquote><p>阅读链接：：如果你对于编程范式的定义相对模糊，可以继续阅读 <a href="https://link.juejin.cn/?target=https://softwareengineering.stackexchange.com/questions/166442/what-is-the-precise-definition-of-programming-paradigm%23" title="https://softwareengineering.stackexchange.com/questions/166442/what-is-the-precise-definition-of-programming-paradigm#">What is the precise definition of programming paradigm?</a> 了解更多。</p></blockquote><p>不同的语言可以支持多种不同的编程范式，例如 C 语言支持 POP 范式，C++ 和 Java 语言支持 OOP 范式，Swift 语言则可以支持 FP 范式，而 Web 前端中的 JavaScript 可以支持上述列出的所有编程范式。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;编程范式&quot;&gt;&lt;a href=&quot;#编程范式&quot; class=&quot;headerlink&quot; title=&quot;编程范式&quot;&gt;&lt;/a&gt;编程范式&lt;/h1&gt;&lt;h2 id=&quot;列举你所了解的编程范式？&quot;&gt;&lt;a href=&quot;#列举你所了解的编程范式？&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="计算机基础" scheme="https://superq314.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="编程范式" scheme="https://superq314.github.io/tags/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/"/>
    
  </entry>
  
</feed>
